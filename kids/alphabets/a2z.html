<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M&M Alphabet</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow: hidden;
            touch-action: none;
        }
        #canvas-container {
            width: 100vw;
            height: 100vh;
            position: relative;
        }
        #controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
            justify-content: center;
            max-width: 90vw;
        }
        #speed-control {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }
        #speed-control label {
            font-size: 12px;
            color: #666;
            font-weight: bold;
        }
        #speed-slider {
            width: 120px;
        }
        #play-pause {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        button {
            padding: 12px 24px;
            font-size: 16px;
            font-weight: bold;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        button:active {
            transform: translateY(0);
        }
        #letter-display {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            min-width: 60px;
            text-align: center;
        }
        #info {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.9);
            padding: 15px 30px;
            border-radius: 15px;
            font-size: 18px;
            font-weight: bold;
            color: #333;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>
<body>
    <div id="canvas-container"></div>
    <div id="info">Tap Next to start!</div>
    <div id="controls">
        <button id="play-pause">▶ Play</button>
        <button id="prev">Previous</button>
        <div id="letter-display">-</div>
        <button id="next">Next</button>
        <button id="random">Random</button>
        <div id="speed-control">
            <label>Speed</label>
            <input type="range" id="speed-slider" min="0.5" max="5" step="0.5" value="2">
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        let scene, camera, renderer, candies = [];
        let currentIndex = 0;
        let isPlaying = false;
        let autoPlayInterval = null;
        let animationSpeed = 2; // seconds per letter
        const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split('');
        
        const colors = [
            0xFF0000, // Red
            0xFFA500, // Orange
            0xFFFF00, // Yellow
            0x00FF00, // Green
            0x0000FF, // Blue
            0x8B4513  // Brown
        ];

        const letterPatterns = {
            'A': [[0,0],[1,0],[2,0],[3,0],[0,1],[3,1],[0,2],[1,2],[2,2],[3,2],[0,3],[3,3],[0,4],[3,4],[0,5],[3,5],[0,6],[3,6]],
            'B': [[0,0],[1,0],[2,0],[0,1],[3,1],[0,2],[3,2],[0,3],[1,3],[2,3],[0,4],[3,4],[0,5],[3,5],[0,6],[1,6],[2,6]],
            'C': [[1,0],[2,0],[3,0],[0,1],[0,2],[0,3],[0,4],[0,5],[1,6],[2,6],[3,6]],
            'D': [[0,0],[1,0],[2,0],[0,1],[3,1],[0,2],[3,2],[0,3],[3,3],[0,4],[3,4],[0,5],[3,5],[0,6],[1,6],[2,6]],
            'E': [[0,0],[1,0],[2,0],[3,0],[0,1],[0,2],[0,3],[1,3],[2,3],[0,4],[0,5],[0,6],[1,6],[2,6],[3,6]],
            'F': [[0,0],[1,0],[2,0],[3,0],[0,1],[0,2],[0,3],[1,3],[2,3],[0,4],[0,5],[0,6]],
            'G': [[1,0],[2,0],[3,0],[0,1],[0,2],[0,3],[2,3],[3,3],[0,4],[3,4],[0,5],[3,5],[1,6],[2,6],[3,6]],
            'H': [[0,0],[3,0],[0,1],[3,1],[0,2],[3,2],[0,3],[1,3],[2,3],[3,3],[0,4],[3,4],[0,5],[3,5],[0,6],[3,6]],
            'I': [[0,0],[1,0],[2,0],[3,0],[1,1],[2,1],[1,2],[2,2],[1,3],[2,3],[1,4],[2,4],[1,5],[2,5],[0,6],[1,6],[2,6],[3,6]],
            'J': [[2,0],[3,0],[2,1],[3,1],[2,2],[3,2],[2,3],[3,3],[0,4],[2,4],[3,4],[0,5],[3,5],[1,6],[2,6]],
            'K': [[0,0],[3,0],[0,1],[2,1],[3,1],[0,2],[1,2],[2,2],[0,3],[1,3],[0,4],[2,4],[0,5],[2,5],[3,5],[0,6],[3,6]],
            'L': [[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[1,6],[2,6],[3,6]],
            'M': [[0,0],[4,0],[0,1],[1,1],[3,1],[4,1],[0,2],[1,2],[2,2],[3,2],[4,2],[0,3],[2,3],[4,3],[0,4],[4,4],[0,5],[4,5],[0,6],[4,6]],
            'N': [[0,0],[4,0],[0,1],[1,1],[4,1],[0,2],[1,2],[4,2],[0,3],[2,3],[4,3],[0,4],[3,4],[4,4],[0,5],[3,5],[4,5],[0,6],[4,6]],
            'O': [[1,0],[2,0],[3,0],[0,1],[4,1],[0,2],[4,2],[0,3],[4,3],[0,4],[4,4],[0,5],[4,5],[1,6],[2,6],[3,6]],
            'P': [[0,0],[1,0],[2,0],[3,0],[0,1],[4,1],[0,2],[4,2],[0,3],[1,3],[2,3],[3,3],[0,4],[0,5],[0,6]],
            'Q': [[1,0],[2,0],[3,0],[0,1],[4,1],[0,2],[4,2],[0,3],[4,3],[0,4],[3,4],[4,4],[0,5],[4,5],[1,6],[2,6],[3,6],[5,6]],
            'R': [[0,0],[1,0],[2,0],[3,0],[0,1],[4,1],[0,2],[4,2],[0,3],[1,3],[2,3],[3,3],[0,4],[2,4],[0,5],[3,5],[0,6],[4,6]],
            'S': [[1,0],[2,0],[3,0],[0,1],[0,2],[1,2],[2,2],[3,2],[4,2],[4,3],[4,4],[0,5],[4,5],[1,6],[2,6],[3,6]],
            'T': [[0,0],[1,0],[2,0],[3,0],[4,0],[2,1],[2,2],[2,3],[2,4],[2,5],[2,6]],
            'U': [[0,0],[4,0],[0,1],[4,1],[0,2],[4,2],[0,3],[4,3],[0,4],[4,4],[0,5],[4,5],[1,6],[2,6],[3,6]],
            'V': [[0,0],[4,0],[0,1],[4,1],[0,2],[4,2],[1,3],[3,3],[1,4],[3,4],[1,5],[3,5],[2,6]],
            'W': [[0,0],[4,0],[0,1],[4,1],[0,2],[4,2],[0,3],[2,3],[4,3],[0,4],[1,4],[3,4],[4,4],[0,5],[1,5],[3,5],[4,5],[1,6],[3,6]],
            'X': [[0,0],[4,0],[0,1],[4,1],[1,2],[3,2],[2,3],[1,4],[3,4],[0,5],[4,5],[0,6],[4,6]],
            'Y': [[0,0],[4,0],[0,1],[4,1],[1,2],[3,2],[2,3],[2,4],[2,5],[2,6]],
            'Z': [[0,0],[1,0],[2,0],[3,0],[4,0],[4,1],[3,2],[2,3],[1,4],[0,5],[0,6],[1,6],[2,6],[3,6],[4,6]]
        };

        // Copy uppercase patterns to lowercase
        alphabet.forEach(letter => {
            if (letter.toLowerCase() !== letter && !letterPatterns[letter.toLowerCase()]) {
                letterPatterns[letter.toLowerCase()] = letterPatterns[letter];
            }
        });

        function init() {
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x667eea);

            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 15;

            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.getElementById('canvas-container').appendChild(renderer.domElement);

            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambientLight);

            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(5, 5, 5);
            scene.add(directionalLight);

            window.addEventListener('resize', onWindowResize);
        }

        function createCandy(x, y, color) {
            const geometry = new THREE.SphereGeometry(0.4, 32, 32);
            geometry.scale(1, 0.8, 1);
            
            const material = new THREE.MeshPhongMaterial({
                color: color,
                shininess: 100,
                specular: 0xffffff
            });

            const candy = new THREE.Mesh(geometry, material);
            candy.position.set(x * 1.2 - 2.4, -y * 1.2 + 4, 0);
            
            candy.userData = {
                originalY: candy.position.y,
                speed: Math.random() * 0.02 + 0.01,
                amplitude: Math.random() * 0.3 + 0.2,
                phase: Math.random() * Math.PI * 2
            };

            return candy;
        }

        function displayLetter(letter) {
            clearCandies();
            
            const pattern = letterPatterns[letter] || letterPatterns['A'];
            
            pattern.forEach((pos, i) => {
                setTimeout(() => {
                    const color = colors[Math.floor(Math.random() * colors.length)];
                    const candy = createCandy(pos[0], pos[1], color);
                    scene.add(candy);
                    candies.push(candy);
                    
                    candy.scale.set(0, 0, 0);
                    animateIn(candy);
                }, i * 50);
            });

            document.getElementById('letter-display').textContent = letter;
            document.getElementById('info').textContent = `Letter: ${letter}`;
        }

        function startAutoPlay() {
            if (autoPlayInterval) clearInterval(autoPlayInterval);
            isPlaying = true;
            document.getElementById('play-pause').textContent = '⏸ Pause';
            
            autoPlayInterval = setInterval(() => {
                currentIndex = (currentIndex + 1) % alphabet.length;
                displayLetter(alphabet[currentIndex]);
            }, animationSpeed * 1000);
        }

        function stopAutoPlay() {
            if (autoPlayInterval) {
                clearInterval(autoPlayInterval);
                autoPlayInterval = null;
            }
            isPlaying = false;
            document.getElementById('play-pause').textContent = '▶ Play';
        }

        function animateIn(candy) {
            let scale = 0;
            const interval = setInterval(() => {
                scale += 0.1;
                candy.scale.set(scale, scale, scale);
                if (scale >= 1) {
                    clearInterval(interval);
                }
            }, 20);
        }

        function clearCandies() {
            candies.forEach(candy => {
                scene.remove(candy);
                candy.geometry.dispose();
                candy.material.dispose();
            });
            candies = [];
        }

        function animate() {
            requestAnimationFrame(animate);

            candies.forEach(candy => {
                candy.rotation.y += 0.02;
                candy.userData.phase += candy.userData.speed;
                candy.position.y = candy.userData.originalY + 
                    Math.sin(candy.userData.phase) * candy.userData.amplitude;
            });

            renderer.render(scene, camera);
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        document.getElementById('next').addEventListener('click', () => {
            stopAutoPlay();
            currentIndex = (currentIndex + 1) % alphabet.length;
            displayLetter(alphabet[currentIndex]);
        });

        document.getElementById('prev').addEventListener('click', () => {
            stopAutoPlay();
            currentIndex = (currentIndex - 1 + alphabet.length) % alphabet.length;
            displayLetter(alphabet[currentIndex]);
        });

        document.getElementById('random').addEventListener('click', () => {
            stopAutoPlay();
            currentIndex = Math.floor(Math.random() * alphabet.length);
            displayLetter(alphabet[currentIndex]);
        });

        document.getElementById('play-pause').addEventListener('click', () => {
            if (isPlaying) {
                stopAutoPlay();
            } else {
                startAutoPlay();
            }
        });

        document.getElementById('speed-slider').addEventListener('input', (e) => {
            animationSpeed = parseFloat(e.target.value);
            if (isPlaying) {
                stopAutoPlay();
                startAutoPlay();
            }
        });

        init();
        animate();
        displayLetter(alphabet[0]);
    </script>
</body>
</html>