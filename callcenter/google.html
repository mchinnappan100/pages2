<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Google CCaaS Integration Guide</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class'
    }
  </script>

  <style>
    /* accordion content base */
    .accordion-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.36s cubic-bezier(.2,.8,.2,1), opacity 0.28s ease;
      opacity: 0;
    }

    /* visible state helper class */
    .accordion-open {
      opacity: 1;
    }

    /* rotate icon */
    .icon-rotate {
      transform-origin: 50% 50%;
      transition: transform 0.28s ease;
    }
    .icon-rotated {
      transform: rotate(90deg);
    }

    /* Better scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    ::-webkit-scrollbar-track {
      background: transparent;
    }
    ::-webkit-scrollbar-thumb {
      background: rgba(156, 163, 175, 0.5);
      border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: rgba(156, 163, 175, 0.7);
    }

    /* Code block styling */
    pre {
      white-space: pre;
      word-wrap: normal;
      overflow-x: auto;
    }
  </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-200">

  <!-- Sidebar (desktop) -->
  <aside class="fixed top-0 left-0 h-screen w-64 bg-white dark:bg-gray-800 shadow-lg p-6 space-y-6 hidden md:block overflow-y-auto z-50">
    <h2 class="text-2xl font-bold mb-4 text-gray-900 dark:text-gray-100">üìò Guide Menu</h2>

    <nav class="space-y-2 text-sm">
      <a href="#intro" class="block px-3 py-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100">Introduction</a>
      <a href="#architecture" class="block px-3 py-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100">Architecture</a>
      <a href="#webhooks" class="block px-3 py-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100">Webhooks</a>
      <a href="#chat" class="block px-3 py-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100">Chat Deploy</a>
      <a href="#salesforce" class="block px-3 py-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100">Salesforce Steps</a>
    </nav>

    <button id="themeToggle" onclick="toggleTheme()"
      class="w-full bg-gray-300 dark:bg-gray-700 hover:bg-gray-400 dark:hover:bg-gray-600 py-2 px-4 rounded-lg font-semibold transition-colors text-gray-900 dark:text-gray-100 flex items-center justify-center gap-2">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/>
      </svg>
      <span id="themeText">Toggle Theme</span>
    </button>
  </aside>

  <!-- Mobile Menu Button -->
  <div class="fixed top-4 right-4 md:hidden z-50">
    <button onclick="toggleMobileMenu()"
            class="px-4 py-2 rounded-lg bg-white dark:bg-gray-800 shadow-lg border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-gray-100">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
      </svg>
    </button>
  </div>

  <!-- Mobile Sidebar Overlay -->
  <div id="mobileMenuOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden md:hidden" onclick="toggleMobileMenu()"></div>
  <aside id="mobileSidebar" class="fixed top-0 left-0 h-screen w-64 bg-white dark:bg-gray-800 shadow-lg p-6 space-y-6 z-50 transform -translate-x-full transition-transform duration-300 md:hidden overflow-y-auto">
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100">üìò Menu</h2>
      <button onclick="toggleMobileMenu()" class="p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>
    </div>

    <nav class="space-y-2 text-sm">
      <a href="#intro" onclick="toggleMobileMenu()" class="block px-3 py-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors text-gray-700 dark:text-gray-300">Introduction</a>
      <a href="#architecture" onclick="toggleMobileMenu()" class="block px-3 py-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors text-gray-700 dark:text-gray-300">Architecture</a>
      <a href="#webhooks" onclick="toggleMobileMenu()" class="block px-3 py-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors text-gray-700 dark:text-gray-300">Webhooks</a>
      <a href="#chat" onclick="toggleMobileMenu()" class="block px-3 py-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors text-gray-700 dark:text-gray-300">Chat Deploy</a>
      <a href="#salesforce" onclick="toggleMobileMenu()" class="block px-3 py-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors text-gray-700 dark:text-gray-300">Salesforce Steps</a>
    </nav>

    <button onclick="toggleTheme()"
      class="w-full bg-gray-300 dark:bg-gray-700 hover:bg-gray-400 dark:hover:bg-gray-600 py-2 px-4 rounded-lg font-semibold transition-colors text-gray-900 dark:text-gray-100 flex items-center justify-center gap-2">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/>
      </svg>
      Toggle Theme
    </button>
  </aside>

  <!-- Main -->
  <main class="ml-0 md:ml-64 px-6 py-10 max-w-5xl">

    <!-- Intro -->
    <section id="intro" class="scroll-mt-4">
      <h1 class="text-4xl font-bold text-gray-900 dark:text-gray-100">Google CCaaS Integration Guide</h1>
      <p class="mt-4 text-lg text-gray-700 dark:text-gray-300 leading-relaxed">
        A complete reference for integrating Google Cloud Contact Center AI (CCaaS) 
        with websites, APIs, telephony gateways, and Salesforce.
      </p>
    </section>

    <!-- Architecture -->
    <section id="architecture" class="mt-16 scroll-mt-4">
      <h2 class="text-3xl font-bold mb-6 text-gray-900 dark:text-gray-100">Interactive Architecture Diagram</h2>

      <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700">
        <svg id="archSvg" viewBox="0 0 900 350"
             class="w-full cursor-pointer transition-transform duration-300 hover:scale-105">

          <!-- Customer -->
          <rect x="20" y="40" width="150" height="50" rx="10" fill="#4ade80" opacity="0.9"/>
          <text x="95" y="70" font-size="16" font-weight="600" text-anchor="middle" fill="#1f2937">Customer</text>

          <!-- Telephony Gateway -->
          <rect x="220" y="40" width="200" height="50" rx="10" fill="#60a5fa" opacity="0.9"/>
          <text x="320" y="70" font-size="16" font-weight="600" text-anchor="middle" fill="#1f2937">CCAI Telephony</text>

          <!-- Arrows -->
          <line x1="170" y1="65" x2="220" y2="65" stroke="#9ca3af" stroke-width="3" marker-end="url(#arrow)" />
          <line x1="420" y1="65" x2="500" y2="65" stroke="#9ca3af" stroke-width="3" marker-end="url(#arrow)" />

          <!-- Dialogflow -->
          <rect x="500" y="40" width="180" height="50" rx="10" fill="#facc15" opacity="0.9"/>
          <text x="590" y="70" font-size="16" font-weight="600" text-anchor="middle" fill="#1f2937">Dialogflow CX</text>

          <!-- Webhooks -->
          <rect x="720" y="40" width="150" height="50" rx="10" fill="#fb7185" opacity="0.9"/>
          <text x="795" y="70" font-size="16" font-weight="600" text-anchor="middle" fill="#1f2937">Webhooks</text>

          <line x1="680" y1="65" x2="720" y2="65" stroke="#9ca3af" stroke-width="3" marker-end="url(#arrow)" />

          <!-- Backend -->
          <rect x="720" y="140" width="150" height="50" rx="10" fill="#a78bfa" opacity="0.9"/>
          <text x="795" y="170" font-size="16" font-weight="600" text-anchor="middle" fill="#1f2937">Backend APIs</text>

          <line x1="795" y1="90" x2="795" y2="140" stroke="#9ca3af" stroke-width="3" marker-end="url(#arrow)" />

          <!-- Agent Assist -->
          <rect x="500" y="140" width="180" height="50" rx="10" fill="#34d399" opacity="0.9"/>
          <text x="590" y="170" font-size="16" font-weight="600" text-anchor="middle" fill="#1f2937">Agent Assist</text>

          <line x1="590" y1="90" x2="590" y2="140" stroke="#9ca3af" stroke-width="3" marker-end="url(#arrow)" />

          <!-- Salesforce -->
          <rect x="300" y="240" width="180" height="50" rx="10" fill="#0ea5e9" opacity="0.9"/>
          <text x="390" y="270" font-size="16" font-weight="600" text-anchor="middle" fill="#1f2937">Salesforce</text>

          <line x1="590" y1="190" x2="450" y2="240" stroke="#9ca3af" stroke-width="3" marker-end="url(#arrow)" />

          <defs>
            <marker id="arrow" markerWidth="10" markerHeight="10" refX="5" refY="3" orient="auto" fill="#9ca3af">
              <path d="M0,0 L0,6 L9,3 z" />
            </marker>
          </defs>

        </svg>

        <p class="text-sm text-gray-600 dark:text-gray-400 mt-4 text-center">
          üñ±Ô∏è Hover to zoom ‚Ä¢ Fully scalable SVG diagram
        </p>
      </div>
    </section>

    <!-- Webhooks Accordion -->
    <section id="webhooks" class="mt-16 scroll-mt-4">
      <button class="accordion-toggle w-full flex items-center justify-between px-6 py-4 bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 rounded-xl font-semibold text-white shadow-lg transition-all"
              aria-expanded="false"
              data-target="webhooksContent"
              onclick="toggleAccordion(event)">
        <span class="text-lg">üîó Webhooks & API Integration</span>
        <svg class="icon-rotate w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
      </button>

      <div id="webhooksContent" class="accordion-content mt-4 rounded-xl bg-white dark:bg-gray-800 p-6 border border-gray-200 dark:border-gray-700">
        <h3 class="text-xl font-bold mb-3 text-gray-900 dark:text-gray-100">üì§ Webhook Request</h3>
        <div class="bg-gray-900 dark:bg-gray-950 text-green-400 p-4 rounded-lg text-sm font-mono overflow-auto shadow-inner">
<pre>{
  "fulfillmentInfo": { "tag": "getAccountStatus" },
  "sessionInfo": { "parameters": { "accountId": "12345" } }
}</pre>
        </div>

        <h3 class="text-xl font-bold mt-6 mb-3 text-gray-900 dark:text-gray-100">üì• Webhook Response</h3>
        <div class="bg-gray-900 dark:bg-gray-950 text-green-400 p-4 rounded-lg text-sm font-mono overflow-auto shadow-inner">
<pre>{
  "fulfillment_response": {
    "messages": [
      { "text": { "text": ["Your account balance is $42.80"] } }
    ]
  }
}</pre>
        </div>

        <div class="mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 rounded">
          <p class="text-sm text-gray-700 dark:text-gray-300">
            <strong>üí° Tip:</strong> Webhooks allow Dialogflow to call your backend APIs for dynamic responses, database queries, and external integrations.
          </p>
        </div>
      </div>
    </section>

    <!-- Chat Accordion -->
    <section id="chat" class="mt-8 scroll-mt-4">
      <button class="accordion-toggle w-full flex items-center justify-between px-6 py-4 bg-gradient-to-r from-green-500 to-teal-500 hover:from-green-600 hover:to-teal-600 rounded-xl font-semibold text-white shadow-lg transition-all"
              aria-expanded="false"
              data-target="chatContent"
              onclick="toggleAccordion(event)">
        <span class="text-lg">üí¨ Chat Deployment Guide</span>
        <svg class="icon-rotate w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
      </button>

      <div id="chatContent" class="accordion-content mt-4 rounded-xl bg-white dark:bg-gray-800 p-6 border border-gray-200 dark:border-gray-700">
        <h3 class="text-xl font-bold mb-3 text-gray-900 dark:text-gray-100">üåê Website Integration Code</h3>
        <div class="bg-gray-900 dark:bg-gray-950 text-yellow-300 p-4 rounded-lg text-sm font-mono overflow-auto shadow-inner">
<pre>&lt;script src="https://www.gstatic.com/dialogflow-console/fast/messenger/bootstrap.js?v=1"&gt;&lt;/script&gt;
&lt;df-messenger
  project-id="YOUR_PROJECT_ID"
  agent-id="YOUR_AGENT_ID"
  language-code="en"&gt;
&lt;/df-messenger&gt;</pre>
        </div>

        <div class="mt-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-500 rounded">
          <p class="text-sm text-gray-700 dark:text-gray-300">
            <strong>‚ö†Ô∏è Important:</strong> Replace YOUR_PROJECT_ID and YOUR_AGENT_ID with your actual Google Cloud project and Dialogflow CX agent IDs.
          </p>
        </div>
      </div>
    </section>

    <!-- Salesforce Accordion -->
    <section id="salesforce" class="mt-8 mb-20 scroll-mt-4">
      <button class="accordion-toggle w-full flex items-center justify-between px-6 py-4 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 rounded-xl font-semibold text-white shadow-lg transition-all"
              aria-expanded="false"
              data-target="sfContent"
              onclick="toggleAccordion(event)">
        <span class="text-lg">‚òÅÔ∏è Salesforce Integration ‚Äî Step-by-Step</span>
        <svg class="icon-rotate w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
      </button>

      <div id="sfContent" class="accordion-content mt-4 rounded-xl bg-white dark:bg-gray-800 p-6 border border-gray-200 dark:border-gray-700">
        <h3 class="text-xl font-bold mb-4 text-gray-900 dark:text-gray-100">üìã Implementation Steps</h3>
        <ol class="space-y-3">
          <li class="flex gap-3">
            <span class="flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold text-sm">1</span>
            <span class="text-gray-700 dark:text-gray-300 pt-1">Create Dialogflow CX Agent in Google Cloud Console</span>
          </li>
          <li class="flex gap-3">
            <span class="flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold text-sm">2</span>
            <span class="text-gray-700 dark:text-gray-300 pt-1">Enable CCAI APIs (Dialogflow, Agent Assist, Contact Center AI Platform)</span>
          </li>
          <li class="flex gap-3">
            <span class="flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold text-sm">3</span>
            <span class="text-gray-700 dark:text-gray-300 pt-1">Install Google CCAI package from Salesforce AppExchange</span>
          </li>
          <li class="flex gap-3">
            <span class="flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold text-sm">4</span>
            <span class="text-gray-700 dark:text-gray-300 pt-1">Configure Omni-Channel routing and queues in Salesforce</span>
          </li>
          <li class="flex gap-3">
            <span class="flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold text-sm">5</span>
            <span class="text-gray-700 dark:text-gray-300 pt-1">Enable Agent Assist for real-time suggestions</span>
          </li>
          <li class="flex gap-3">
            <span class="flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold text-sm">6</span>
            <span class="text-gray-700 dark:text-gray-300 pt-1">Connect OAuth service account with proper IAM permissions</span>
          </li>
          <li class="flex gap-3">
            <span class="flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold text-sm">7</span>
            <span class="text-gray-700 dark:text-gray-300 pt-1">Test end-to-end: routing, chat sessions, and transcript storage</span>
          </li>
        </ol>

        <div class="mt-6 p-4 bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 rounded">
          <p class="text-sm text-gray-700 dark:text-gray-300">
            <strong>‚úÖ Success:</strong> Once configured, agents will see real-time AI suggestions, automated case creation, and full conversation history in Salesforce.
          </p>
        </div>
      </div>
    </section>

  </main>

  <script>
    /* DARK MODE - initialize */
    (function initTheme() {
      if (
        localStorage.theme === "dark" ||
        (!("theme" in localStorage) && window.matchMedia("(prefers-color-scheme: dark)").matches)
      ) {
        document.documentElement.classList.add("dark");
      } else {
        document.documentElement.classList.remove("dark");
      }
    })();

    function toggleTheme() {
      const isDark = document.documentElement.classList.toggle("dark");
      localStorage.theme = isDark ? "dark" : "light";
    }

    /* Mobile Menu Toggle */
    function toggleMobileMenu() {
      const sidebar = document.getElementById('mobileSidebar');
      const overlay = document.getElementById('mobileMenuOverlay');
      const isOpen = !sidebar.classList.contains('-translate-x-full');
      
      if (isOpen) {
        sidebar.classList.add('-translate-x-full');
        overlay.classList.add('hidden');
      } else {
        sidebar.classList.remove('-translate-x-full');
        overlay.classList.remove('hidden');
      }
    }

    /* ACCORDION: unified handler */
    function toggleAccordion(event) {
      const btn = event.currentTarget;
      const targetId = btn.getAttribute('data-target');
      if (!targetId) return;
      const content = document.getElementById(targetId);
      if (!content) return;

      const isOpen = btn.getAttribute('aria-expanded') === 'true';

      if (isOpen) {
        // close
        content.style.maxHeight = null;
        content.classList.remove('accordion-open');
        btn.setAttribute('aria-expanded', 'false');
        const svg = btn.querySelector('.icon-rotate');
        if (svg) svg.classList.remove('icon-rotated');
      } else {
        // open
        content.style.maxHeight = content.scrollHeight + 'px';
        content.classList.add('accordion-open');
        btn.setAttribute('aria-expanded', 'true');
        const svg = btn.querySelector('.icon-rotate');
        if (svg) svg.classList.add('icon-rotated');
      }
    }

    /* Resize observer: keep maxHeight updated while open */
    const ro = new ResizeObserver(entries => {
      for (const entry of entries) {
        const el = entry.target;
        const btn = document.querySelector(`.accordion-toggle[data-target="${el.id}"]`);
        if (btn && btn.getAttribute('aria-expanded') === 'true') {
          el.style.maxHeight = el.scrollHeight + 'px';
        }
      }
    });

    document.querySelectorAll('.accordion-content').forEach(c => ro.observe(c));

    /* Smooth scroll with offset */
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
      });
    });
  </script>
</body>
</html>