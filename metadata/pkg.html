<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Metadata Package Builder</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-gray-200 min-h-screen flex flex-col">

  <!-- Header -->
  <header class="bg-gray-800 sticky top-0 shadow-lg px-4 py-3">
    <h1 class="text-xl font-bold text-indigo-400">Metadata Package Builder</h1>
  </header>

  <!-- Main -->
  <main class="flex-1 max-w-4xl mx-auto px-6 py-8 space-y-6">

    <p class="text-gray-300">Click <span class="text-yellow-400">Create package.xml</span> to add metadata types.</p>

    <!-- Example Metadata Types -->
    <div class="space-y-4">
      <div class="flex justify-between items-center bg-gray-800 p-3 rounded-lg shadow">
        <span>CustomObject</span>
        <button onclick="addToPackage('CustomObject')" 
          class="bg-indigo-600 hover:bg-indigo-500 text-white px-3 py-1 rounded-lg">
          Create package.xml
        </button>
      </div>
      <div class="flex justify-between items-center bg-gray-800 p-3 rounded-lg shadow">
        <span>ApexClass</span>
        <button onclick="addToPackage('ApexClass')" 
          class="bg-indigo-600 hover:bg-indigo-500 text-white px-3 py-1 rounded-lg">
          Create package.xml
        </button>
      </div>
      <div class="flex justify-between items-center bg-gray-800 p-3 rounded-lg shadow">
        <span>CustomTab</span>
        <button onclick="addToPackage('CustomTab')" 
          class="bg-indigo-600 hover:bg-indigo-500 text-white px-3 py-1 rounded-lg">
          Create package.xml
        </button>
      </div>
    </div>

    <!-- Current Package Preview -->
    <div class="mt-8">
      <h2 class="text-lg font-semibold text-green-400 mb-2">üì¶ Current package.xml</h2>
      <pre id="packagePreview" class="bg-gray-800 p-4 rounded-lg text-sm overflow-x-auto"></pre>
    </div>

    <!-- Download Button -->
    <button onclick="downloadPackage()" 
      class="bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-lg mt-4">
      ‚¨áÔ∏è Download package.xml
    </button>
  </main>

  <!-- Footer -->
  <footer class="bg-gray-800 text-center text-sm text-gray-400 py-4 sticky bottom-0">
    ¬© 2025 Metadata Package Builder
  </footer>

  <script>
    // Store metadata types
    let packageTypes = new Set();

    // Add to package
    function addToPackage(type) {
      packageTypes.add(type);
      renderPackage();
    }

    // Render package.xml
    function renderPackage() {
      const typesXml = Array.from(packageTypes).map(t => `
    <types>
        <members>*</members>
        <name>${t}</name>
    </types>`).join("");

      const xml = `<?xml version="1.0" encoding="UTF-8"?>
<Package xmlns="http://soap.sforce.com/2006/04/metadata">
${typesXml}
    <version>60.0</version>
</Package>`;

      document.getElementById("packagePreview").textContent = xml;
    }

    // Download package.xml
    function downloadPackage() {
      const blob = new Blob([document.getElementById("packagePreview").textContent], { type: "text/xml" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "package.xml";
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }
  </script>

</body>
</html>
