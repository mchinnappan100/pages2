<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fix npm sudo Install Issue</title>
  <link rel="icon" type="image/x-icon" href="https://mohan-chinnappan-n5.github.io/dfv/img/mc_favIcon.ico" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class'
    }
  </script>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200 transition-colors duration-300">

  <!-- Header -->
  <header class="sticky top-0 z-50 backdrop-blur bg-white/70 dark:bg-gray-800/70 border-b border-gray-200 dark:border-gray-700">
    <div class="max-w-5xl mx-auto px-6 py-4 flex justify-between items-center">
      <h1 class="text-2xl font-bold">ğŸ›  Fix npm Global Install (No sudo)</h1>
      <button onclick="toggleTheme()" class="px-4 py-2 rounded-xl bg-gray-200 dark:bg-gray-700 hover:scale-105 transition">
        Toggle Theme
      </button>
    </div>
  </header>

  <main class="max-w-5xl mx-auto px-6 py-10 space-y-12">

    <!-- Problem Section -->
    <section class="space-y-4">
      <h2 class="text-xl font-semibold">ğŸ“Œ Problem</h2>
      <p>When installing a global npm package:</p>
      <div class="bg-gray-100 dark:bg-gray-800 p-4 rounded-2xl font-mono text-sm overflow-x-auto">
        npm install -g package_name
      </div>
      <p>You may see:</p>
      <div class="bg-red-100 dark:bg-red-900/40 p-4 rounded-2xl font-mono text-sm overflow-x-auto">
        EACCES: permission denied
      </div>
      <p>Using <code class="bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded">sudo</code> may seem to fix it, but it can create bigger problems later.</p>
    </section>

    <!-- Root Cause -->
    <section class="space-y-4">
      <h2 class="text-xl font-semibold">ğŸ¯ Root Cause</h2>
      <ul class="list-disc list-inside space-y-2">
        <li>Global npm directory owned by root</li>
        <li>User lacks write permissions</li>
        <li>Node installed using sudo</li>
      </ul>
    </section>

    <!-- Solution Option 1 -->
    <section class="space-y-6">
      <h2 class="text-xl font-semibold">âœ… Option 1: Change npm Global Directory (Recommended)</h2>

      <div>
        <p class="font-medium">Step 1 â€” Create directory</p>
        <div class="code-block">mkdir ~/.npm-global</div>
      </div>

      <div>
        <p class="font-medium">Step 2 â€” Configure npm</p>
        <div class="code-block">npm config set prefix '~/.npm-global'</div>
      </div>

      <div>
        <p class="font-medium">Step 3 â€” Update PATH (zsh)</p>
        <div class="code-block">echo 'export PATH=$HOME/.npm-global/bin:$PATH' >> ~/.zshrc
source ~/.zshrc</div>
      </div>

      <div>
        <p class="font-medium">Step 4 â€” Install without sudo</p>
        <div class="code-block">npm install -g package_name</div>
      </div>
    </section>

    <!-- Option 2 -->
    <section class="space-y-4">
      <h2 class="text-xl font-semibold">â­ Option 2: Use nvm (Best Long-Term Solution)</h2>
      <div class="code-block">curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash</div>
      <div class="code-block">nvm install --lts
nvm use --lts</div>
      <p>Benefits:</p>
      <ul class="list-disc list-inside space-y-1">
        <li>No permission issues</li>
        <li>Multiple Node versions</li>
        <li>No sudo required</li>
      </ul>
    </section>

    <!-- What Not To Do -->
    <section class="space-y-4">
      <h2 class="text-xl font-semibold text-red-500">ğŸš« What NOT To Do</h2>
      <div class="code-block">sudo npm install -g package_name</div>
      <p>Avoid changing system folder ownership. It can break your system setup.</p>
    </section>

    <!-- Troubleshooting -->
    <section class="space-y-4">
      <h2 class="text-xl font-semibold">ğŸ” Troubleshooting</h2>
      <div class="code-block">npm config get prefix</div>
      <p>If it points to <code>/usr/local</code> or <code>/usr/lib</code>, you likely have permission issues.</p>
    </section>

    <!-- Summary -->
    <section class="space-y-4">
      <h2 class="text-xl font-semibold">ğŸ Summary</h2>
      <div class="bg-green-100 dark:bg-green-900/40 p-6 rounded-2xl space-y-2">
        <p>âŒ Donâ€™t use sudo with npm</p>
        <p>âœ… Configure a user-owned global directory</p>
        <p>â­ Best practice: Use nvm</p>
      </div>
    </section>

  </main>

  <footer class="text-center py-8 text-sm text-gray-500 dark:text-gray-400">
    Knowledge Article â€¢ npm Global Install Fix â€¢ macOS & Linux
  </footer>

  <style>
    .code-block {
      background-color: rgba(31,41,55,1);
      color: #e5e7eb;
      padding: 1rem;
      border-radius: 1rem;
      font-family: monospace;
      white-space: pre-wrap;
      margin-top: 0.5rem;
    }
  </style>

  <script>
    function toggleTheme() {
      document.documentElement.classList.toggle('dark');
    }
  </script>

</body>
</html>
