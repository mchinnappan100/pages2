<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Salesforce Code Scanner CLI Documentation</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="icon" type="image/x-icon" href="https://mohan-chinnappan-n5.github.io/dfv/img/mc_favIcon.ico">
  <!-- Prism.js CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
  <style>
    body {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    main {
      flex: 1;
    }
    html {
      scroll-behavior: smooth;
    }
    /* Style for the copy button */
    .copy-btn {
      transition: background-color 0.3s;
    }
    .copy-btn:hover {
      background-color: #2563eb !important;
    }
    /* Adjust Prism.js code block styling */
    pre[class*="language-"] {
      position: relative;
      background: #f5f2f0 !important;
      border-radius: 0.5rem;
      padding: 1rem;
      overflow-x: auto;
      font-size: 0.875rem;
    }
    code[class*="language-"] {
      background: none !important;
    }
  </style>
</head>
<body class="bg-gray-100 font-sans">
  <!-- Sticky Navbar -->
  <nav class="bg-blue-600 text-white shadow-lg sticky top-0 z-50">
    <div class="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
      <div class="text-2xl font-bold">
        <a href="#home">Salesforce Code Scanner CLI</a>
      </div>
      <div class="space-x-4">
        <a href="#home" class="hover:text-blue-200">Home</a>
        <a href="#overview" class="hover:text-blue-200">Overview</a>
        <a href="#setup" class="hover:text-blue-200">Setup Steps</a>
        <a href="#usage" class="hover:text-blue-200">Usage</a>
        <a href="#commands" class="hover:text-blue-200">Commands</a>
        <a href="#examples" class="hover:text-blue-200">Examples</a>
        <a href="#troubleshooting" class="hover:text-blue-200">Troubleshooting</a>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main>
    <!-- Hero Section -->
    <section id="home" class="bg-gradient-to-r from-blue-500 to-blue-700 text-white py-20">
      <div class="max-w-6xl mx-auto px-4 text-center">
        <h1 class="text-5xl font-bold mb-4">Salesforce Code Scanner CLI</h1>
        <p class="text-xl mb-8">A step-by-step guide to installing and using a Node.js CLI tool for scanning Salesforce Apex and LWC code with PMD and Salesforce Tooling API.</p>
        <a href="#setup" class="bg-white text-blue-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-200">Get Started</a>
      </div>
    </section>

    <!-- Overview Section -->
    <section id="overview" class="py-16">
      <div class="max-w-6xl mx-auto px-4">
        <h2 class="text-3xl font-bold text-gray-800 text-center mb-12">Overview</h2>
        <div class="bg-white p-6 rounded-lg shadow-md">
          <p class="text-gray-600">The <code class="bg-gray-200 px-1 rounded">Salesforce Code Scanner CLI</code> is a Node.js-based tool that enables developers to scan Salesforce Apex and Lightning Web Components (LWC) code for best practices and violations. It uses PMD for Apex static analysis and the Salesforce Tooling API for LWC checks. This guide covers installation, usage, and troubleshooting for the CLI on macOS and other platforms.</p>
        </div>
      </div>
    </section>

    <!-- Setup Steps Section -->
    <section id="setup" class="py-16">
      <div class="max-w-6xl mx-auto px-4">
        <h2 class="text-3xl font-bold text-gray-800 mb-8">Setup Steps</h2>
        <p class="text-gray-600 mb-6">Follow these steps to install and configure the Salesforce Code Scanner CLI:</p>
        <div class="space-y-6">
          <!-- Step 1: Install Dependencies -->
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-xl font-semibold text-gray-800 mb-2">ðŸ”¹ Step 1: Install Dependencies</h3>
            <p class="text-gray-600 mb-4">Ensure you have Node.js, Salesforce CLI, Java (for PMD), and PMD installed:</p>
            <div class="relative">
              <pre class="language-bash"><code id="code-step1">brew install node
brew install sfdx-cli
brew install openjdk@17
curl -L https://github.com/pmd/pmd/releases/download/pmd_releases%2F7.13.0/pmd-dist-7.13.0-bin.zip -o pmd-bin-7.13.0.zip
unzip pmd-bin-7.13.0.zip -d /Users/$USER
</code></pre>
              <button class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700" onclick="copyCode('code-step1')">Copy</button>
            </div>
          </div>
          <!-- Step 2: Clone Repository -->
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-xl font-semibold text-gray-800 mb-2">ðŸ”¹ Step 2: Clone Repository</h3>
            <p class="text-gray-600 mb-4">Clone or download the CLI repository:</p>
            <div class="relative">
              <pre class="language-bash"><code id="code-step2">git clone https://github.com/mchinnappan100/salesforce-scanner-node
cd salesforce-scanner-node
</code></pre>
              <button class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700" onclick="copyCode('code-step2')">Copy</button>
            </div>
          </div>
          <!-- Step 3: Install Node.js Dependencies -->
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-xl font-semibold text-gray-800 mb-2">ðŸ”¹ Step 3: Install Node.js Dependencies</h3>
            <p class="text-gray-600 mb-4">Install required Node.js packages:</p>
            <div class="relative">
              <pre class="language-bash"><code id="code-step3">npm install
</code></pre>
              <button class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700" onclick="copyCode('code-step3')">Copy</button>
            </div>
          </div>
          <!-- Step 4: Make Executable -->
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-xl font-semibold text-gray-800 mb-2">ðŸ”¹ Step 4: Make Executable</h3>
            <p class="text-gray-600 mb-4">Set executable permissions for the CLI:</p>
            <div class="relative">
              <pre class="language-bash"><code id="code-step4">chmod +x scanner.js
</code></pre>
              <button class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700" onclick="copyCode('code-step4')">Copy</button>
            </div>
          </div>
          <!-- Step 5: Verify Installation -->
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-xl font-semibold text-gray-800 mb-2">ðŸ”¹ Step 5: Verify Installation</h3>
            <p class="text-gray-600 mb-4">Check that all components are installed correctly:</p>
            <div class="relative">
              <pre class="language-bash"><code id="code-step5">node --version
sf --version
java --version
/Users/$USER/pmd-bin-7.13.0/bin/pmd --version
</code></pre>
              <button class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700" onclick="copyCode('code-step5')">Copy</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Usage Section -->
    <section id="usage" class="py-16">
      <div class="max-w-6xl mx-auto px-4">
        <h2 class="text-3xl font-bold text-gray-800 mb-8">Usage</h2>
        <div class="bg-white p-6 rounded-lg shadow-md">
          <p class="text-gray-600 mb-4">The CLI supports scanning Apex and LWC code with the following command structure:</p>
          <div class="relative">
            <pre class="language-bash"><code id="code-usage">./scanner.js scan type [options]
</code></pre>
            <button class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700" onclick="copyCode('code-usage')">Copy</button>
          </div>
          <p class="text-gray-600 mt-4 mb-4">Where type is:</p>
          <ul class="list-disc list-inside text-gray-600 mb-4">
            <li><code class="bg-gray-200 px-1 rounded">apex</code>: Scan Apex code.</li>
            <li><code class="bg-gray-200 px-1 rounded">lwc</code>: Scan LWC components.</li>
            <li><code class="bg-gray-200 px-1 rounded">all</code>: Scan both Apex and LWC.</li>
          </ul>
          <p class="text-gray-600 mb-4">Options include:</p>
          <table class="w-full border-collapse border border-gray-300 mb-4">
            <thead>
              <tr class="bg-gray-200">
                <th class="border border-gray-300 px-4 py-2 text-left">Option</th>
                <th class="border border-gray-300 px-4 py-2 text-left">Description</th>
                <th class="border border-gray-300 px-4 py-2 text-left">Default</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="border border-gray-300 px-4 py-2"><code class="bg-gray-200 px-1 rounded">--username <username></code></td>
                <td class="border border-gray-300 px-4 py-2">Salesforce username for authentication</td>
                <td class="border border-gray-300 px-4 py-2">From config</td>
              </tr>
              <tr>
                <td class="border border-gray-300 px-4 py-2"><code class="bg-gray-200 px-1 rounded">--pmd-bin-path <path></code></td>
                <td class="border border-gray-300 px-4 py-2">Path to PMD binary</td>
                <td class="border border-gray-300 px-4 py-2"><code class="bg-gray-200 px-1 rounded">./bin</code></td>
              </tr>
              <tr>
                <td class="border border-gray-300 px-4 py-2"><code class="bg-gray-200 px-1 rounded">--rule-set <path></code></td>
                <td class="border border-gray-300 px-4 py-2">Path to PMD ruleset XML</td>
                <td class="border border-gray-300 px-4 py-2">From config</td>
              </tr>
              <tr>
                <td class="border border-gray-300 px-4 py-2"><code class="bg-gray-200 px-1 rounded">--local-folder <path></code></td>
                <td class="border border-gray-300 px-4 py-2">Local folder with .cls files</td>
                <td class="border border-gray-300 px-4 py-2">From config</td>
              </tr>
              <tr>
                <td class="border border-gray-300 px-4 py-2"><code class="bg-gray-200 px-1 rounded">--access-json <path></code></td>
                <td class="border border-gray-300 px-4 py-2">Path to access.json</td>
                <td class="border border-gray-300 px-4 py-2">From config</td>
              </tr>
              <tr>
                <td class="border border-gray-300 px-4 py-2"><code class="bg-gray-200 px-1 rounded">--output-dir <path></code></td>
                <td class="border border-gray-300 px-4 py-2">Output directory for results</td>
                <td class="border border-gray-300 px-4 py-2"><code class="bg-gray-200 px-1 rounded">/tmp</code></td>
              </tr>
            </tbody>
          </table>
          <p class="text-gray-600">Options are persisted in <code class="bg-gray-200 px-1 rounded">~/.salesforce-scanner-config.json</code> for reuse.</p>
        </div>
      </div>
    </section>

    <!-- Commands Section -->
    <section id="commands" class="py-16">
      <div class="max-w-6xl mx-auto px-4">
        <h2 class="text-3xl font-bold text-gray-800 mb-8">Commands</h2>
        <div class="space-y-6">
          <!-- scan apex -->
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-xl font-semibold text-gray-800 mb-2">ðŸ”¹ scan apex</h3>
            <p class="text-gray-600 mb-4">Scans Apex code using PMD.</p>
            <div class="relative">
              <pre class="language-bash"><code id="code-cmd-apex">./scanner.js scan apex --pmd-bin-path <path> --rule-set <path> [--username <username> | --access-json <path>] [--local-folder <path>] [--output-dir <path>]
</code></pre>
              <button class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700" onclick="copyCode('code-cmd-apex')">Copy</button>
            </div>
            <p class="text-gray-600 mt-4">Requires <code class="bg-gray-200 px-1 rounded">--pmd-bin-path</code> and <code class="bg-gray-200 px-1 rounded">--rule-set</code>. Use <code class="bg-gray-200 px-1 rounded">--local-folder</code> for local files or <code class="bg-gray-200 px-1 rounded">--username</code>/<code class="bg-gray-200 px-1 rounded">--access-json</code> for Salesforce queries.</p>
          </div>
          <!-- scan lwc -->
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-xl font-semibold text-gray-800 mb-2">ðŸ”¹ scan lwc</h3>
            <p class="text-gray-600 mb-4">Scans LWC components for best practices.</p>
            <div class="relative">
              <pre class="language-bash"><code id="code-cmd-lwc">./scanner.js scan lwc [--username <username> | --access-json <path>] [--output-dir <path>]
</code></pre>
              <button class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700" onclick="copyCode('code-cmd-lwc')">Copy</button>
            </div>
            <p class="text-gray-600 mt-4">Requires <code class="bg-gray-200 px-1 rounded">--username</code> or <code class="bg-gray-200 px-1 rounded">--access-json</code>.</p>
          </div>
          <!-- scan all -->
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-xl font-semibold text-gray-800 mb-2">ðŸ”¹ scan all</h3>
            <p class="text-gray-600 mb-4">Scans both Apex and LWC.</p>
            <div class="relative">
              <pre class="language-bash"><code id="code-cmd-all">./scanner.js scan all --pmd-bin-path <path> --rule-set <path> [--username <username> | --access-json <path>] [--local-folder <path>] [--output-dir <path>]
</code></pre>
              <button class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700" onclick="copyCode('code-cmd-all')">Copy</button>
            </div>
            <p class="text-gray-600 mt-4">Combines requirements for <code class="bg-gray-200 px-1 rounded">apex</code> and <code class="bg-gray-200 px-1 rounded">lwc</code>.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Examples Section -->
    <section id="examples" class="py-16">
      <div class="max-w-6xl mx-auto px-4">
        <h2 class="text-3xl font-bold text-gray-800 mb-8">Examples</h2>
        <div class="space-y-6">
          <!-- Example 1: Scan Apex from Local Folder -->
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-xl font-semibold text-gray-800 mb-2">ðŸ”¹ Scan Apex from Local Folder</h3>
            <p class="text-gray-600 mb-4">Scan Apex classes in <code class="bg-gray-200 px-1 rounded">./apex_classes</code>:</p>
            <div class="relative">
              <pre class="language-bash"><code id="code-ex-apex">
./scanner.js scan apex --pmd-bin-path /Users/$USER/pmd-bin-7.13.0/bin --rule-set quickstart.xml --local-folder ./apex_classes

</code></pre>
              <button class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700" onclick="copyCode('code-ex-apex')">Copy</button>
            </div>
            <p class="text-gray-600 mt-4 mb-4">Sample output:</p>
            <div class="relative">
              <pre class="language-bash"><code id="code-ex-apex-out">[blue] Loaded config from ~/.salesforce-scanner-config.json
[green] Config saved to ~/.salesforce-scanner-config.json
[blue] Output directory: /tmp
[blue] Scanning Apex classes...
[blue] Found 1 .cls files in ./apex_classes
[cyan] Created temporary Apex files: /tmp/temp_apex/MyClass.cls
[blue] Executing PMD: /Users/$USER/pmd-bin-7.13.0/bin/pmd check --debug -d /tmp/temp_apex -f xml -R quickstart.xml -r /tmp/pmd_output.xml
[green] PMD completed with violations (exit code 4); processing output
[cyan] Found 1 violations in /tmp/pmd_output.xml
[green] Apex scan results saved to /tmp/apex_scan_results_20250508T070018.csv
[green] Preserving /tmp/temp_apex and /tmp/pmd_output.xml for debugging
</code></pre>
              <button class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700" onclick="copyCode('code-ex-apex-out')">Copy</button>
            </div>
            <p class="text-gray-600 mt-4 mb-4">Output CSV (<code class="bg-gray-200 px-1 rounded">/tmp/apex_scan_results_20250508T070018.csv</code>):</p>
            <div class="relative">
              <pre class="language-csv"><code id="code-ex-apex-csv">file,beginline,endline,begincolumn,endcolumn,rule,ruleset,externalInfoUrl,priority,description
/tmp/temp_apex/MyClass.cls,1,1,8,15,ApexDoc,Documentation,https://docs.pmd-code.org/pmd-doc-7.13.0/pmd_rules_apex_documentation.html#apexdoc,3,Missing ApexDoc comment
</code></pre>
              <button class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700" onclick="copyCode('code-ex-apex-csv')">Copy</button>
            </div>
          </div>
          <!-- Example 2: Scan Apex and LWC from Salesforce -->
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-xl font-semibold text-gray-800 mb-2">ðŸ”¹ Scan Apex and LWC from Salesforce</h3>
            <p class="text-gray-600 mb-4">Scan both Apex and LWC using Salesforce credentials:</p>
            <div class="relative">
              <pre class="language-bash"><code id="code-ex-all">
./scanner.js scan all --username user@example.com --pmd-bin-path /Users/$USER/pmd-bin-7.13.0/bin --rule-set quickstart.xml
</code></pre>
              <button class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700" onclick="copyCode('code-ex-all')">Copy</button>
            </div>
            <p class="text-gray-600 mt-4 mb-4">Sample output:</p>
            <div class="relative">
              <pre class="language-bash"><code id="code-ex-all-out">[blue] Loaded config from ~/.salesforce-scanner-config.json
[green] Config saved to ~/.salesforce-scanner-config.json
[blue] Output directory: /tmp
[blue] Scanning Apex classes...
[cyan] Retrieved 10 Apex classes
[green] PMD completed with violations (exit code 4); processing output
[cyan] Found 609 violations in /tmp/pmd_output.xml
[green] Apex scan results saved to /tmp/apex_scan_results_20250508T070018.csv
[blue] Scanning LWC components...
[cyan] Retrieved 5 LWC components
[cyan] Found 10 LWC violations
[green] LWC scan results saved to /tmp/lwc_scan_results_20250508T070018.csv
</code></pre>
            </div>
            <p class="text-gray-600 mt-4 mb-4">LWC CSV (<code class="bg-gray-200 px-1 rounded">/tmp/lwc_scan_results_20250508T070018.csv</code>):</p>
            <div class="relative">
              <pre class="language-csv"><code id="code-ex-lwc-csv">component,issue,description
myComponent,Outdated API Version,API version 56.0 is outdated; consider upgrading to 58.0 or higher.
</code></pre>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Troubleshooting Section -->
    <section id="troubleshooting" class="py-16">
      <div class="max-w-6xl mx-auto px-4">
        <h2 class="text-3xl font-bold text-gray-800 mb-8">Troubleshooting</h2>
        <div class="space-y-6">
          <!-- PMD Errors -->
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-xl font-semibold text-gray-800 mb-2">ðŸ”¹ PMD Errors</h3>
            <p class="text-gray-600 mb-4">Test PMD directly to diagnose issues:</p>
            <div class="relative">
              <pre class="language-bash"><code id="code-tr-pmd">/Users/$USER/pmd-bin-7.13.0/bin/pmd check --debug -d ./apex_classes -f xml -R quickstart.xml -r /tmp/test_output.xml
echo $?
</code></pre>
              <button class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700" onclick="copyCode('code-tr-pmd')">Copy</button>
            </div>
            <p class="text-gray-600 mt-4">Exit code 4 indicates violations found (success). Other codes (e.g., 1, 2) indicate errors.</p>
          </div>
          <!-- Salesforce CLI Errors -->
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-xl font-semibold text-gray-800 mb-2">ðŸ”¹ Salesforce CLI Errors</h3>
            <p class="text-gray-600 mb-4">Verify Salesforce CLI credentials:</p>
            <div class="relative">
              <pre class="language-bash"><code id="code-tr-sf">sf force org display -u user@example.com --json
</code></pre>
              <button class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700" onclick="copyCode('code-tr-sf')">Copy</button>
            </div>
          </div>
          <!-- Config Issues -->
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-xl font-semibold text-gray-800 mb-2">ðŸ”¹ Config Issues</h3>
            <p class="text-gray-600 mb-4">Check or reset the configuration file:</p>
            <div class="relative">
              <pre class="language-bash"><code id="code-tr-config">cat ~/.salesforce-scanner-config.json
rm ~/.salesforce-scanner-config.json
</code></pre>
              <button class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700" onclick="copyCode('code-tr-config')">Copy</button>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="bg-blue-600 text-white py-6">
    <div class="max-w-6xl mx-auto px-4 text-center">
      <p>MC - 2025 Salesforce Code Scanner CLI</p>
    </div>
  </footer>

  <!-- Prism.js JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-csv.min.js"></script>

  <!-- JavaScript for Copy Functionality -->
  <script>
    function copyCode(elementId) {
      const codeElement = document.getElementById(elementId);
      const text = codeElement.innerText;
      navigator.clipboard.writeText(text).then(() => {
        alert('Code copied to clipboard!');
      }).catch(err => {
        console.error('Failed to copy: ', err);
      });
    }
  </script>
</body>
</html>
