<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>COE Portal</title>

  <link rel="icon" type="image/x-icon" href="https://mohan-chinnappan-n5.github.io/dfv/img/mc_favIcon.ico" />

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            panel: '#0f172a',
            sidebar: '#020617',
            divider: '#1e293b'
          }
        }
      }
    }
  </script>

  <style>
    iframe {
      border: none;
    }
    .resizer {
      cursor: col-resize;
      user-select: none;
    }
  </style>
</head>

<body class="h-screen overflow-hidden bg-slate-950 text-slate-200">

  <!-- App Container -->
  <div class="flex h-full">

    <!-- Left Pane -->
    <aside id="leftPane" class="w-72 min-w-[200px] bg-sidebar border-r border-divider flex flex-col">

      <!-- Header -->
      <div class="px-4 py-4 border-b border-divider">
        <h1 class="text-lg font-semibold tracking-wide">ðŸ“˜ Docs</h1>
      </div>

      <!-- ðŸ” Search -->
      <div class="px-4 pb-3 border-b border-divider">
        <input
          id="navSearch"
          type="text"
          placeholder="Search docsâ€¦"
          class="w-full rounded-lg bg-slate-900 text-slate-200
                 placeholder-slate-400 px-3 py-2 text-sm
                 border border-slate-700
                 focus:outline-none focus:ring-2 focus:ring-indigo-500"
        />
      </div>

      <!-- Navigation -->
      <nav class="flex-1 overflow-y-auto px-4 py-3 space-y-6">

        <!-- COE -->
        <div>
          <h2 class="text-xs uppercase tracking-wider text-slate-400 mb-2">COE</h2>
          <ul class="space-y-1">
            <li><button onclick="loadPage('coe.html')" class="toc-link">COE Overview</button></li>
            <li><button onclick="loadPage('coe-tracker.html')" class="toc-link">COE Tracker</button></li>
            <li><button onclick="loadPage('coe-tracker-help.html')" class="toc-link">COE Tracker â€“ Help</button></li>
            <li><button onclick="loadPage('coe-chart.html')" class="toc-link">COE Charts</button></li>
          </ul>
        </div>

        <!-- OAuth -->
        <div>
          <h2 class="text-xs uppercase tracking-wider text-slate-400 mb-2">OAuth</h2>
          <ul class="space-y-1">
            <li><button onclick="loadPage('oauth.html')" class="toc-link">OAuth Flow</button></li>
            <li><button onclick="loadPage('tokens.html')" class="toc-link">Tokens</button></li>
          </ul>
        </div>

        <!-- Deployments -->
        <div>
          <h2 class="text-xs uppercase tracking-wider text-slate-400 mb-2">Deployments</h2>
          <ul class="space-y-1">
            <li><button onclick="loadPage('deployment.html')" class="toc-link">No big-bang</button></li>
          </ul>
        </div>

        <!-- SF Events -->
        <div>
          <h2 class="text-xs uppercase tracking-wider text-slate-400 mb-2">SF Events</h2>
          <ul class="space-y-1">
            <li>
              <button
                onclick="loadPage('https://www.npmjs.com/package/sf-event-monitor')"
                class="toc-link">
                SF Events Monitor
              </button>
            </li>
          </ul>
        </div>

        <!-- Org Health -->
        <div>
          <h2 class="text-xs uppercase tracking-wider text-slate-400 mb-2">Org Health</h2>
          <ul class="space-y-1">
            <li>
              <button
                onclick="loadPage('https://www.npmjs.com/package/salesforce-org-health')"
                class="toc-link">
                SF Org Health
              </button>
            </li>
            <li>
              <button onclick="loadPage('org-viz.html')" class="toc-link">Org Viz</button>
            </li>
          </ul>
        </div>

        <!-- Sandbox -->
        <div>
          <h2 class="text-xs uppercase tracking-wider text-slate-400 mb-2">Sandbox</h2>
          <ul class="space-y-1">
            <li>
              <button
                onclick="loadPage('https://mchinnappan100.github.io/pages2/sandbox/tracker.html')"
                class="toc-link">
                Sandbox Refresh Tracker
              </button>
            </li>
            <li>
              <button
                onclick="loadPage('https://mchinnappan100.github.io/pages2/sandbox/refresh.html')"
                class="toc-link">
                Full Copy Sandbox Refresh
              </button>
            </li>
            <li>
              <button
                onclick="loadPage('https://www.npmjs.com/package/sf-data-extractor')"
                class="toc-link">
                Salesforce Data Extractor
              </button>
            </li>
            <li>
              <button
                onclick="loadPage('https://www.npmjs.com/package/sf-metadata-selector')"
                class="toc-link">
                Salesforce Metadata Selector
              </button>
            </li>
          </ul>
        </div>

      </nav>
    </aside>

    <!-- Splitter -->
    <div id="resizer" class="resizer w-1 bg-divider hover:bg-slate-500"></div>

    <!-- Right Pane -->
    <main class="flex-1 bg-panel">
      <iframe
        id="contentFrame"
        src="coe.html"
        class="w-full h-full bg-white dark:bg-panel">
      </iframe>
    </main>

  </div>

  <!-- Scripts -->
  <script>
    const iframe = document.getElementById('contentFrame');

    function loadPage(page) {
      if (page.startsWith('http')) {
        window.open(page, '_blank', 'noopener,noreferrer');
      } else {
        iframe.src = page;
      }
    }

    /* Resizer */
    const resizer = document.getElementById('resizer');
    const leftPane = document.getElementById('leftPane');
    let isDragging = false;

    resizer.addEventListener('mousedown', () => {
      isDragging = true;
      document.body.style.cursor = 'col-resize';
    });

    document.addEventListener('mousemove', (e) => {
      if (!isDragging) return;
      const newWidth = e.clientX;
      if (newWidth > 180 && newWidth < 500) {
        leftPane.style.width = `${newWidth}px`;
      }
    });

    document.addEventListener('mouseup', () => {
      isDragging = false;
      document.body.style.cursor = 'default';
    });

    /* ðŸ” Navigation Search */
    const searchInput = document.getElementById('navSearch');

    searchInput.addEventListener('input', () => {
      const query = searchInput.value.toLowerCase().trim();

      document.querySelectorAll('nav > div').forEach(section => {
        const items = section.querySelectorAll('li');
        let hasVisible = false;

        items.forEach(li => {
          const text = li.innerText.toLowerCase();
          const match = text.includes(query);
          li.style.display = match ? '' : 'none';
          if (match) hasVisible = true;
        });

        section.style.display = hasVisible ? '' : 'none';
      });
    });
  </script>

  <!-- Shared styles -->
  <style>
    .toc-link {
      width: 100%;
      text-align: left;
      padding: 0.5rem 0.75rem;
      border-radius: 0.5rem;
      color: #cbd5f5;
      font-size: 0.875rem;
    }
    .toc-link:hover {
      background-color: #1e293b;
      color: #ffffff;
    }
  </style>

</body>
</html>
