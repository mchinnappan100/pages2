<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Salesforce Manual Steps Manager</title>
  <link rel="icon" href="https://mohan-chinnappan-n5.github.io/dfv/img/mc_favIcon.ico"/>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <!-- PapaParse -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
  <!-- Monaco Editor -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.51.0/min/vs/loader.min.js"></script>
  <link rel="stylesheet" data-name="vs/editor/editor.main" href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.51.0/min/vs/editor/editor.main.min.css">
  <style>
    body { background: #0f172a; color: #e2e8f0; }
    .step-item { transition: all 0.2s; }
    .step-item:hover { background: #1e293b; }
    .step-item.active { background: #1e40af; border-left: 4px solid #60a5fa; }
    #monacoContainer { border: 1px solid #374151; border-radius: 8px; }
  </style>
</head>
<body class="min-h-screen">
  <div class="container mx-auto p-6 max-w-7xl">
    <h1 class="text-4xl font-bold mb-6 flex items-center gap-3">
      <i class="fas fa-cloud text-blue-500"></i> Salesforce Manual Steps Manager
    </h1>

    <div class="flex flex-wrap gap-3 mb-6">
      <label class="bg-blue-600 hover:bg-blue-700 text-white px-5 py-3 rounded-lg cursor-pointer flex items-center gap-2">
        <i class="fas fa-upload"></i> Upload CSV
        <input type="file" id="csvUpload" accept=".csv" class="hidden">
      </label>
      <button id="downloadCsv" class="bg-green-600 hover:bg-green-700 text-white px-5 py-3 rounded-lg flex items-center gap-2">
        <i class="fas fa-download"></i> Download CSV
      </button>
      <button id="addStep" class="bg-purple-600 hover:bg-purple-700 text-white px-5 py-3 rounded-lg flex items-center gap-2">
        <i class="fas fa-plus"></i> Add Step
      </button>
      <a href="./steps.csv" class="bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-3 rounded-lg flex items-center gap-2">
        <i class="fas fa-file-csv"></i> Sample CSV
      </a>
    </div>

    <div class="split-container bg-gray-800 rounded-lg overflow-hidden flex">
      <!-- Left: Steps List -->

       <div id="leftPane" class="p-4 overflow-y-auto" style="flex: 0 0 32%;">
        <h2 class="text-2xl font-bold mb-4 flex items-center gap-2"><i class="fas fa-list"></i> Steps</h2>
        <div class="mb-4">
          <input type="text" id="searchSteps" placeholder="Search steps..." class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:border-blue-500 outline-none">
        </div>
        <div id="stepsList"></div>
      </div>

      <div id="resizer" class="w-2 bg-gray-700 cursor-col-resize hover:bg-blue-600 transition"></div>

      <!-- Right: Editor -->
      <div id="rightPane" class="flex-1 p-6 overflow-y-auto">
        <div id="editorContainer" class="hidden">
          <h2 class="text-2xl font-bold mb-6 flex items-center gap-2"><i class="fas fa-edit"></i> Step Editor</h2>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
            <div>
              <label class="block text-sm font-medium mb-1">Step Number</label>
              <input type="text" id="stepNumber" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:border-blue-500 outline-none">
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">Object</label>
              <input type="text" id="objectField" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:border-blue-500 outline-none">
            </div>
          </div>

      <div class="mb-4">
  <label class="block text-sm font-medium mb-2 flex items-center justify-between">
    <span>Description - images not supported. <br> Please use our Video Record Tool with voice for recording and store the recording in google drive and share the link here
      <label class="text-xs bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded cursor-pointer">
      <i class="fas fa-image"></i> 
      <a href="https://mohan-chinnappan-n2.github.io/sr/sra.html" target="_blank">Video Record Tool</a> 
    </label>

    </span>
    <!--
    <label class="text-xs bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded cursor-pointer">
      <i class="fas fa-image"></i> Insert Image
      <input type="file" id="insertImageBtn" style="display: none;" accept="image/*" multiple class="hidden">
    </label>
  -->
  </label>

  <div id="monacoContainer" style="height: 500px;"></div>
</div> 

          <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
            <div>
              <label class="block text-sm font-medium mb-1">Action</label>
              <select id="actionField" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2">
                <option>Select Action</option>
                <option>Create</option><option>Update</option><option>Delete</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">Automated</label>
              <select id="automatedField" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2">
                <option>N/A</option><option>true</option><option>false</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">Metadata Type</label>
              <input type="text" id="metadataType" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2">
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">API Action</label>
              <select id="apiAction" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2">
                <option>Select API Action</option>
                <option>create</option><option>update</option><option>delete</option><option>deploy</option>
              </select>
            </div>
          </div>

          <div class="mb-6">
            <label class="block text-sm font-medium mb-2 flex items-center justify-between">
              <span>Prompt (for LLM)</span>
              <button id="generatePrompt" class="text-xs bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded"><i class="fas fa-robot"></i> Generate</button>
            </label>
            <textarea id="promptField" rows="6" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2"></textarea>
          </div>

          <div class="flex flex-wrap gap-3">
            <button id="saveStep" class="bg-green-600 hover:bg-green-700 px-6 py-3 rounded-lg flex items-center gap-2">
              <i class="fas fa-save"></i> Save Step
            </button>
            <button id="deleteStep" class="bg-red-600 hover:bg-red-700 px-6 py-3 rounded-lg flex items-center gap-2">
              <i class="fas fa-trash"></i> Delete Step
            </button>
            <button id="viewPromptModal" class="bg-yellow-600 hover:bg-yellow-700 px-6 py-3 rounded-lg flex items-center gap-2">
              <i class="fas fa-eye"></i> View Prompt
            </button>
          </div>
        </div>

        <div id="emptyState" class="flex items-center justify-center h-full text-gray-500 text-center">
          <div>
            <i class="fas fa-arrow-left text-6xl mb-4"></i>
            <p class="text-xl">Select a step to edit</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Prompt Modal -->
  <div id="promptModal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4">
    <div class="bg-gray-800 rounded-lg p-6 max-w-3xl w-full max-h-screen overflow-y-auto">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-xl font-bold">Generated Prompt for LLM</h3>
        <button id="closeModal" class="text-gray-400 hover:text-white"><i class="fas fa-times text-2xl"></i></button>
      </div>
      <pre id="promptContent" class="bg-gray-900 p-4 rounded text-sm whitespace-pre-wrap"></pre>
      <button id="copyPrompt" class="mt-4 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded flex items-center gap-2">
        <i class="fas fa-copy"></i> Copy to Clipboard
      </button>
    </div>
  </div>
  <textarea id="clipboardCatcher" style="position:absolute; left:-9999px;"></textarea>


  <script src="./app.js"></script>
</body>
</html>