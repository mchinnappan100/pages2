<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Greeting Card Book</title>
    <link rel="icon" type="image/x-icon" href="https://mohan-chinnappan-n5.github.io/dfv/img/mc_favIcon.ico" />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Dancing+Script:wght@400;700&display=swap');

        * { touch-action: pan-y; }

        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            perspective: 3000px;
            font-family: 'Playfair Display', serif;
            background: linear-gradient(135deg, #fef3c7, #fde68a, #fecaca);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .book-wrapper {
            position: relative;
            width: 100vw;
            height: 100vh;
            max-width: 1000px;
            max-height: 700px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
            box-sizing: border-box;
        }

        .book-container {
            position: relative;
            width: 100%;
            height: 100%;
            max-width: 1000px;
            max-height: 700px;
            transform-style: preserve-3d;
            transition: transform 0.3s ease;
        }

        .book-scale {
            width: 100%;
            height: 100%;
            transform-origin: center;
            transition: transform 0.3s ease;
        }

        .page {
            position: absolute;
            width: 50%;
            height: 100%;
            background: #fefefe;
            transform-origin: left center;
            transition: transform 1.8s cubic-bezier(0.645, 0.045, 0.355, 1);
            box-shadow: 0 8px 40px rgba(0,0,0,0.15);
            backface-visibility: hidden;
            border: 1px solid #d4af37;
            overflow: hidden;
        }

        .page-front { left: 0; }
        .page-back { 
            left: 0; 
            transform: rotateY(180deg);
        }
        .page.flipped {
            transform: rotateY(-180deg);
        }

        .page-content {
            width: 100%;
            height: 100%;
            padding: 10% 8%;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" opacity="0.03"><text x="10" y="50" font-size="60" fill="%23000">‚ú¶</text></svg>');
        }

        .decorative-border {
            position: absolute;
            border: 2px solid #d4af37;
            top: 15px; left: 15px; right: 15px; bottom: 15px;
            pointer-events: none;
            opacity: 0.3;
        }

        .turn-btn {
            position: fixed;
            bottom: 20px;
            padding: 14px 20px;
            background: linear-gradient(135deg, #d4af37 0%, #c9a227 100%);
            color: white;
            border: 2px solid #b8941e;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            font-family: 'Playfair Display', serif;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.4);
            transition: all 0.3s;
            z-index: 1000;
            font-size: 14px;
            min-width: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .turn-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.6);
        }

        .turn-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        #prevBtn { left: 15px; }
        #nextBtn { right: 15px; }
        #autoBtn { right: 80px; }

        .page-indicator {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 1000;
        }

        .indicator-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #d4af37;
            opacity: 0.4;
            transition: all 0.4s;
            border: 1.5px solid #b8941e;
        }

        .indicator-dot.active {
            opacity: 1;
            width: 30px;
            border-radius: 6px;
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.6);
        }

        .card-title {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(2rem, 8vw, 3.5rem);
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .card-subtitle {
            font-size: clamp(1rem, 4vw, 1.6rem);
            font-style: italic;
            color: #555;
        }

        .card-text {
            font-size: clamp(1rem, 3.5vw, 1.4rem);
            line-height: 1.8;
            color: #333;
            max-width: 90%;
        }

        .card-emoji {
            font-size: clamp(3rem, 12vw, 5rem);
            margin-bottom: 20px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }

        .theme-birthday { background: linear-gradient(135deg, #fff5e6 0%, #ffe4cc 100%); }
        .theme-anniversary { background: linear-gradient(135deg, #ffe6f0 0%, #ffd6e8 100%); }
        .theme-graduation { background: linear-gradient(135deg, #e6f7ff 0%, #d6f0ff 100%); }
        .theme-thankyou { background: linear-gradient(135deg, #fff9e6 0%, #fff0cc 100%); }
        .theme-congratulations { background: linear-gradient(135deg, #f0e6ff 0%, #e6d6ff 100%); }
        .theme-getwell { background: linear-gradient(135deg, #e6f9ff 0%, #d6f3ff 100%); }

        .spine {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 8px;
            height: 100%;
            background: linear-gradient(90deg, #8b7355 0%, #6b5844 50%, #8b7355 100%);
            box-shadow: inset 0 0 20px rgba(0,0,0,0.3);
            z-index: 10;
        }

        /* Responsive Scaling */
        @media (max-width: 768px) {
            .book-container { transform: scale(0.85); }
            .turn-btn { padding: 12px 16px; font-size: 13px; bottom: 15px; }
            #autoBtn { right: 70px; }
            .page-indicator { bottom: 70px; }
        }

        @media (max-width: 480px) {
            .book-container { transform: scale(0.7); }
            .turn-btn { padding: 10px 14px; font-size: 12px; }
            #autoBtn { right: 65px; }
            .card-title { font-size: 2.2rem !important; }
        }
    </style>
</head>
<body>
    <div class="book-wrapper">
        <div class="book-container" id="book">
            <div class="book-scale">
                <!-- Book Spine -->
                <div class="spine"></div>

                <!-- Page 1: Front Cover -->
                <div class="page page-front" data-page="0">
                    <div class="decorative-border"></div>
                    <div id="cover-front" class="page-content">
                        <div class="card-emoji">üéâ</div>
                        <h1 class="card-title text-amber-800">Happy Birthday!</h1>
                        <p class="card-subtitle">For Someone Special</p>
                    </div>
                </div>

                <!-- Page 2: Inside Left -->
                <div class="page page-back" data-page="0" style="left: 50%;">
                    <div class="decorative-border"></div>
                    <div id="inside-left" class="page-content bg-gradient-to-br from-white to-amber-50">
                        <div class="card-emoji">üéÇ</div>
                        <p class="card-text">
                            Wishing you a day filled with love, laughter, and joy!
                        </p>
                    </div>
                </div>

                <!-- Page 3: Inside Right -->
                <div class="page page-front" data-page="1" style="left: 50%;">
                    <div class="decorative-border"></div>
                    <div id="inside-right" class="page-content bg-gradient-to-br from-white to-amber-50">
                        <div class="card-emoji">üéÅ</div>
                        <p class="card-text mb-6">
                            May this year bring you endless happiness and wonderful memories!
                        </p>
                        <p class="card-subtitle italic">You deserve all the best!</p>
                    </div>
                </div>

                <!-- Page 4: Back Cover -->
                <div class="page page-back" data-page="1" style="left: 100%;">
                    <div class="decorative-border"></div>
                    <div id="cover-back" class="page-content theme-birthday">
                        <div class="card-emoji">üíù</div>
                        <p class="card-title text-3xl text-amber-900 mb-6">With Love</p>
                        <p class="card-text">Hope your day is as special as you are!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <button id="prevBtn" class="turn-btn">‚Üê Prev</button>
    <button id="autoBtn" class="turn-btn">‚èØ Auto</button>
    <button id="nextBtn" class="turn-btn">Next ‚Üí</button>

    <!-- Page Indicator -->
    <div class="page-indicator">
        <div class="indicator-dot active"></div>
        <div class="indicator-dot"></div>
        <div class="indicator-dot"></div>
    </div>

    <script>
        // Card templates
        const cardTemplates = { /* ... same as original ... */ };

        // Get URL parameters
        function getURLParameter(name) {
            const params = new URLSearchParams(window.location.search);
            return params.get(name);
        }

        const cardType = getURLParameter('t') || 'birthday';
        const personName = getURLParameter('p') || 'Someone Special';

        function initializeCard() {
            const template = cardTemplates[cardType] || cardTemplates.birthday;

            document.getElementById('cover-front').innerHTML = `
                <div class="card-emoji">${template.emoji}</div>
                <h1 class="card-title text-amber-800">${template.title}</h1>
                <p class="card-subtitle">${template.subtitle.replace('{name}', personName)}</p>
            `;

            document.getElementById('inside-left').innerHTML = `
                <div class="card-emoji">${template.page2.emoji}</div>
                <p class="card-text">${template.page2.text}</p>
            `;

            document.getElementById('inside-right').innerHTML = `
                <div class="card-emoji">${template.page3.emoji}</div>
                <p class="card-text mb-6">${template.page3.text}</p>
                <p class="card-subtitle italic">${template.page3.subtext}</p>
            `;

            const backCover = document.getElementById('cover-back');
            backCover.className = `page-content ${template.theme}`;
            backCover.innerHTML = `
                <div class="card-emoji">${template.page4.emoji}</div>
                <p class="card-title text-3xl text-amber-900 mb-6">${template.page4.text}</p>
                <p class="card-text">${template.page4.subtext}</p>
            `;
        }

        // Page turning
        let currentPage = 0;
        const totalPages = 2;
        let autoPlayInterval = null;
        let isAutoPlaying = false;
        let startX = 0;

        const pages = document.querySelectorAll('.page');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const autoBtn = document.getElementById('autoBtn');
        const indicators = document.querySelectorAll('.indicator-dot');
        const book = document.getElementById('book');

        function updatePage() {
            pages.forEach(page => {
                const pageNum = parseInt(page.dataset.page);
                page.classList.toggle('flipped', pageNum < currentPage);
            });

            indicators.forEach((dot, i) => {
                dot.classList.toggle('active', i === currentPage);
            });

            prevBtn.disabled = currentPage === 0;
            nextBtn.disabled = currentPage === totalPages;
        }

        function nextPage() {
            if (currentPage < totalPages) {
                currentPage++;
                updatePage();
            } else if (isAutoPlaying) {
                currentPage = 0;
                updatePage();
            }
        }

        function prevPage() {
            if (currentPage > 0) {
                currentPage--;
                updatePage();
            }
        }

        function toggleAutoPlay() {
            isAutoPlaying = !isAutoPlaying;
            autoBtn.textContent = isAutoPlaying ? '‚è∏ Pause' : '‚èØ Auto';
            autoBtn.style.background = isAutoPlaying 
                ? 'linear-gradient(135deg, #dc2626 0%, #b91c1c 100%)'
                : 'linear-gradient(135deg, #d4af37 0%, #c9a227 100%)';

            if (isAutoPlaying) {
                autoPlayInterval = setInterval(nextPage, 3000);
            } else {
                clearInterval(autoPlayInterval);
            }
        }

        // Touch swipe support
        book.addEventListener('touchstart', e => {
            startX = e.touches[0].clientX;
        });

        book.addEventListener('touchend', e => {
            if (!startX) return;
            const endX = e.changedTouches[0].clientX;
            const diff = startX - endX;

            if (Math.abs(diff) > 50) {
                if (diff > 0) nextPage();
                else prevPage();
                if (isAutoPlaying) toggleAutoPlay();
            }
            startX = 0;
        });

        // Button & keyboard
        nextBtn.onclick = () => { nextPage(); if (isAutoPlaying) toggleAutoPlay(); };
        prevBtn.onclick = () => { prevPage(); if (isAutoPlaying) toggleAutoPlay(); };
        autoBtn.onclick = toggleAutoPlay;

        document.addEventListener('keydown', e => {
            if (e.key === 'ArrowRight') { nextPage(); if (isAutoPlaying) toggleAutoPlay(); }
            if (e.key === 'ArrowLeft') { prevPage(); if (isAutoPlaying) toggleAutoPlay(); }
            if (e.key === ' ') { e.preventDefault(); toggleAutoPlay(); }
        });

        // Initialize
        initializeCard();
        updatePage();

        // Auto-start after 1s
        setTimeout(toggleAutoPlay, 1000);

        // Dynamic scaling
        function updateScale() {
            const wrapper = document.querySelector('.book-wrapper');
            const bookEl = document.querySelector('.book-container');
            const scaleX = wrapper.clientWidth / 1000;
            const scaleY = wrapper.clientHeight / 700;
            const scale = Math.min(scaleX, scaleY, 1);
            bookEl.style.transform = `scale(${scale})`;
        }

        window.addEventListener('resize', updateScale);
        updateScale();
    </script>
</body>
</html>