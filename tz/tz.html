<!DOCTYPE html>
<html lang="en" class="dark">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Time Zone Range Converter</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="icon" type="image/x-icon" href="https://mohan-chinnappan-n5.github.io/dfv/img/mc_favIcon.ico" />
  <style>
    body {
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
      min-height: 100vh;
    }

    .timezone-option {
      padding: 8px 12px;
    }

    .timezone-option:hover {
      background: rgba(59, 130, 246, 0.1);
    }

    select option {
      background: #1e293b;
      color: #f1f5f9;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .animate-fadeIn {
      animation: fadeIn 0.3s ease-out;
    }
  </style>
</head>

<body class="text-gray-100 flex items-center justify-center p-6">
  <div class="w-full max-w-4xl bg-slate-800/70 p-8 rounded-2xl shadow-2xl backdrop-blur-xl border border-slate-700">
    <div class="text-center mb-8">
      <h1 class="text-3xl font-bold mb-2 bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent">
        ⏱️ Time Zone Range Converter
      </h1>
      <p class="text-slate-400 text-sm">Convert time ranges between any two time zones with visual clocks</p>
    </div>

    <!-- Input Form -->
    <div class="space-y-5">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block mb-2 font-semibold text-sm text-slate-300">
            <svg class="inline w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
            </svg>
            From Time Zone
          </label>
          <div class="relative">
            <select id="fromTZ"
              class="w-full p-3 rounded-lg bg-slate-700/80 border border-slate-600 focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none cursor-pointer transition-all">
              <option value="">Select timezone...</option>
            </select>
            <div class="absolute right-3 top-3.5 pointer-events-none">
              <svg class="w-5 h-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </div>
          </div>
        </div>

        <div>
          <label class="block mb-2 font-semibold text-sm text-slate-300">
            <svg class="inline w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
            </svg>
            To Time Zone
          </label>
          <div class="relative">
            <select id="toTZ"
              class="w-full p-3 rounded-lg bg-slate-700/80 border border-slate-600 focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none cursor-pointer transition-all">
              <option value="">Select timezone...</option>
            </select>
            <div class="absolute right-3 top-3.5 pointer-events-none">
              <svg class="w-5 h-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </div>
          </div>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block mb-2 font-semibold text-sm text-slate-300">
            <svg class="inline w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            Start Time
          </label>
          <input id="startTime" type="time" value="09:00"
            class="w-full p-3 rounded-lg bg-slate-700/80 border border-slate-600 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
        </div>

        <div>
          <label class="block mb-2 font-semibold text-sm text-slate-300">
            <svg class="inline w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            End Time
          </label>
          <input id="endTime" type="time" value="17:00"
            class="w-full p-3 rounded-lg bg-slate-700/80 border border-slate-600 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
        </div>
      </div>

      <div class="flex gap-3">
        <button onclick="convertRange()"
          class="flex-1 py-3 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 rounded-lg font-semibold shadow-lg transition-all transform hover:scale-[1.02] active:scale-[0.98]">
          <svg class="inline w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path>
          </svg>
          Convert Time Range
        </button>
        <button onclick="swapTimezones()"
          class="px-4 py-3 bg-slate-700 hover:bg-slate-600 rounded-lg font-semibold shadow-lg transition-all"
          title="Swap time zones">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"></path>
          </svg>
        </button>
      </div>
    </div>

    <!-- Output -->
    <div id="result" class="mt-6 space-y-4 hidden animate-fadeIn">
      <!-- Clocks -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="bg-gradient-to-br from-slate-900/90 to-slate-800/90 rounded-xl border border-slate-700 p-5">
          <div class="flex flex-col items-center">
            <div class="text-sm font-semibold text-blue-400 mb-3">Source Timezone</div>
            <canvas id="sourceClock" width="220" height="220" class="mb-2"></canvas>
            <div class="text-xs text-slate-400 mt-2">
              <span class="inline-block w-3 h-3 bg-green-500 rounded-full mr-1"></span> Start
              <span class="inline-block w-3 h-3 bg-red-500 rounded-full mr-1 ml-3"></span> End
            </div>
          </div>
        </div>

        <div class="bg-gradient-to-br from-slate-900/90 to-slate-800/90 rounded-xl border border-slate-700 p-5">
          <div class="flex flex-col items-center">
            <div class="text-sm font-semibold text-green-400 mb-3">Target Timezone</div>
            <canvas id="targetClock" width="220" height="220" class="mb-2"></canvas>
            <div class="text-xs text-slate-400 mt-2">
              <span class="inline-block w-3 h-3 bg-green-500 rounded-full mr-1"></span> Start
              <span class="inline-block w-3 h-3 bg-red-500 rounded-full mr-1 ml-3"></span> End
            </div>
          </div>
        </div>
      </div>

      <!-- Text Results -->
      <div class="bg-gradient-to-br from-slate-900/90 to-slate-800/90 rounded-xl border border-slate-700 p-5">
        <div class="flex items-start gap-3">
          <div class="bg-green-500/20 p-2 rounded-lg">
            <svg class="w-6 h-6 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </div>
          <div class="flex-1">
            <h2 class="text-lg font-bold mb-3 text-slate-200">Converted Time Range</h2>
            <div class="space-y-3">
              <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                <div class="text-xs text-slate-400 mb-1">Source</div>
                <div class="font-mono text-blue-300" id="sourceText"></div>
              </div>
              <div class="flex justify-center">
                <svg class="w-6 h-6 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3">
                  </path>
                </svg>
              </div>
              <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700">
                <div class="text-xs text-slate-400 mb-1">Converted</div>
                <div class="font-mono text-green-300" id="convertedText"></div>
              </div>
              <div class="text-xs text-slate-400 text-center" id="offsetInfo"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Current Time Display -->
    <div class="mt-6 p-4 bg-slate-900/50 rounded-lg border border-slate-700">
      <div class="text-center">
        <div class="text-xs text-slate-400 mb-1">Current Time</div>
        <div id="currentTime" class="text-sm font-mono text-slate-300"></div>
      </div>
    </div>
  </div>

  <script>
    // Comprehensive list of time zones grouped by region
    const timeZones = [
      {
        group: "Popular", zones: [
          "America/New_York",
          "America/Chicago",
          "America/Denver",
          "America/Los_Angeles",
          "Europe/London",
          "Europe/Paris",
          "Asia/Tokyo",
          "Asia/Shanghai",
          "Asia/Kolkata",
          "Australia/Sydney"
        ]
      },
      {
        group: "Americas", zones: [
          "America/Anchorage",
          "America/Argentina/Buenos_Aires",
          "America/Bogota",
          "America/Caracas",
          "America/Chicago",
          "America/Denver",
          "America/Halifax",
          "America/Lima",
          "America/Los_Angeles",
          "America/Mexico_City",
          "America/New_York",
          "America/Phoenix",
          "America/Santiago",
          "America/Sao_Paulo",
          "America/St_Johns",
          "America/Toronto",
          "America/Vancouver"
        ]
      },
      {
        group: "Europe", zones: [
          "Europe/Amsterdam",
          "Europe/Athens",
          "Europe/Berlin",
          "Europe/Brussels",
          "Europe/Budapest",
          "Europe/Copenhagen",
          "Europe/Dublin",
          "Europe/Helsinki",
          "Europe/Istanbul",
          "Europe/Lisbon",
          "Europe/London",
          "Europe/Madrid",
          "Europe/Moscow",
          "Europe/Oslo",
          "Europe/Paris",
          "Europe/Prague",
          "Europe/Rome",
          "Europe/Stockholm",
          "Europe/Vienna",
          "Europe/Warsaw",
          "Europe/Zurich"
        ]
      },
      {
        group: "Asia", zones: [
          "Asia/Baghdad",
          "Asia/Baku",
          "Asia/Bangkok",
          "Asia/Beirut",
          "Asia/Dhaka",
          "Asia/Dubai",
          "Asia/Hong_Kong",
          "Asia/Jakarta",
          "Asia/Jerusalem",
          "Asia/Karachi",
          "Asia/Kathmandu",
          "Asia/Kolkata",
          "Asia/Kuala_Lumpur",
          "Asia/Manila",
          "Asia/Riyadh",
          "Asia/Seoul",
          "Asia/Shanghai",
          "Asia/Singapore",
          "Asia/Taipei",
          "Asia/Tehran",
          "Asia/Tokyo"
        ]
      },
      {
        group: "Pacific", zones: [
          "Pacific/Auckland",
          "Pacific/Fiji",
          "Pacific/Guam",
          "Pacific/Honolulu",
          "Pacific/Pago_Pago",
          "Pacific/Port_Moresby",
          "Pacific/Tongatapu"
        ]
      },
      {
        group: "Africa", zones: [
          "Africa/Cairo",
          "Africa/Casablanca",
          "Africa/Johannesburg",
          "Africa/Lagos",
          "Africa/Nairobi"
        ]
      },
      {
        group: "Australia", zones: [
          "Australia/Adelaide",
          "Australia/Brisbane",
          "Australia/Darwin",
          "Australia/Melbourne",
          "Australia/Perth",
          "Australia/Sydney"
        ]
      },
      {
        group: "Atlantic", zones: [
          "Atlantic/Azores",
          "Atlantic/Bermuda",
          "Atlantic/Cape_Verde",
          "Atlantic/Reykjavik"
        ]
      }
    ];

    // Populate timezone dropdowns
    function populateTimezones() {
      const fromSelect = document.getElementById('fromTZ');
      const toSelect = document.getElementById('toTZ');

      timeZones.forEach(group => {
        const optgroup1 = document.createElement('optgroup');
        const optgroup2 = document.createElement('optgroup');
        optgroup1.label = group.group;
        optgroup2.label = group.group;

        group.zones.forEach(tz => {
          const option1 = document.createElement('option');
          const option2 = document.createElement('option');
          option1.value = tz;
          option2.value = tz;
          option1.textContent = tz.replace(/_/g, ' ');
          option2.textContent = tz.replace(/_/g, ' ');
          optgroup1.appendChild(option1);
          optgroup2.appendChild(option2);
        });

        fromSelect.appendChild(optgroup1);
        toSelect.appendChild(optgroup2);
      });

      // Set default values
      fromSelect.value = "Asia/Kolkata";
      toSelect.value = "America/New_York";
    }

    function getOffset(timeZone) {
      const now = new Date();
      const tzString = now.toLocaleString('en-US', { timeZone, timeZoneName: 'short' });
      const match = tzString.match(/GMT([+-]\d+)/);
      return match ? match[1] : '';
    }

    function getOffsetMinutes(tz, date = new Date()) {
      // Get the offset for a specific date to account for DST
      const utcDate = new Date(date.toLocaleString('en-US', { timeZone: 'UTC' }));
      const tzDate = new Date(date.toLocaleString('en-US', { timeZone: tz }));
      return Math.round((tzDate - utcDate) / 60000);
    }

function convertTime(timeStr, fromTZ, toTZ) {
      const [hours, minutes] = timeStr.split(':').map(Number);

      // Get current date
      const now = new Date();
      const year = now.getFullYear();
      const month = String(now.getMonth() + 1).padStart(2, '0');
      const day = String(now.getDate()).padStart(2, '0');
      
      // Create ISO string for the time in source timezone
      const timeStrFull = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:00`;
      const isoString = `${year}-${month}-${day}T${timeStrFull}`;
      
      // Create a formatter for the source timezone to get the UTC equivalent
      const sourceFormatter = new Intl.DateTimeFormat('en-US', {
        timeZone: fromTZ,
        year: 'numeric',
        month: '2-digit',
        day: '2-digit',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit',
        hour12: false
      });
      
      // Parse the input time as if it's in the source timezone
      // We need to find what UTC time corresponds to this local time
      let testDate = new Date(isoString + 'Z'); // Start with UTC interpretation
      
      // Iteratively adjust to find the correct UTC time
      for (let i = 0; i < 3; i++) {
        const parts = sourceFormatter.formatToParts(testDate);
        const sourceHour = parseInt(parts.find(p => p.type === 'hour').value);
        const sourceMinute = parseInt(parts.find(p => p.type === 'minute').value);
        
        const hourDiff = hours - sourceHour;
        const minuteDiff = minutes - sourceMinute;
        
        testDate = new Date(testDate.getTime() + hourDiff * 3600000 + minuteDiff * 60000);
      }
      
      // Now convert to target timezone
      const targetFormatter = new Intl.DateTimeFormat('en-US', {
        timeZone: toTZ,
        hour: '2-digit',
        minute: '2-digit',
        hour12: false
      });
      
      const targetParts = targetFormatter.formatToParts(testDate);
      const resultHours = parseInt(targetParts.find(p => p.type === 'hour').value);
      const resultMinutes = parseInt(targetParts.find(p => p.type === 'minute').value);

      const period = resultHours >= 12 ? 'PM' : 'AM';
      const displayHours = resultHours === 0 ? 12 : (resultHours > 12 ? resultHours - 12 : resultHours);
      const displayMinutes = String(resultMinutes).padStart(2, '0');

      return {
        formatted: `${String(displayHours).padStart(2, '0')}:${displayMinutes} ${period}`,
        hours24: resultHours,
        minutes: resultMinutes
      };
    }

    function drawClock(canvasId, startHour, startMin, endHour, endMin, label) {
      const canvas = document.getElementById(canvasId);
      const ctx = canvas.getContext('2d');
      const centerX = canvas.width / 2;
      const centerY = canvas.height / 2;
      const radius = 85;

      // Clear canvas
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Draw clock face
      ctx.beginPath();
      ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
      ctx.fillStyle = '#1e293b';
      ctx.fill();
      ctx.strokeStyle = '#475569';
      ctx.lineWidth = 3;
      ctx.stroke();

      // Draw hour markers
      for (let i = 0; i < 12; i++) {
        const angle = (i * 30 - 90) * Math.PI / 180;
        const x1 = centerX + Math.cos(angle) * (radius - 15);
        const y1 = centerY + Math.sin(angle) * (radius - 15);
        const x2 = centerX + Math.cos(angle) * (radius - 8);
        const y2 = centerY + Math.sin(angle) * (radius - 8);

        ctx.beginPath();
        ctx.moveTo(x1, y1);
        ctx.lineTo(x2, y2);
        ctx.strokeStyle = '#64748b';
        ctx.lineWidth = 2;
        ctx.stroke();

        // Draw hour numbers
        const numX = centerX + Math.cos(angle) * (radius - 25);
        const numY = centerY + Math.sin(angle) * (radius - 25);
        ctx.fillStyle = '#94a3b8';
        ctx.font = 'bold 14px sans-serif';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText(i === 0 ? 12 : i, numX, numY);
      }

      // Draw time range arc
      const startAngle = ((startHour % 12) * 30 + startMin * 0.5 - 90) * Math.PI / 180;
      const endAngle = ((endHour % 12) * 30 + endMin * 0.5 - 90) * Math.PI / 180;

      ctx.beginPath();
      ctx.arc(centerX, centerY, radius - 20, startAngle, endAngle);
      ctx.strokeStyle = '#3b82f6';
      ctx.lineWidth = 8;
      ctx.stroke();

      // Draw start time hand
      const startHandAngle = startAngle;
      const startHandX = centerX + Math.cos(startHandAngle) * (radius - 30);
      const startHandY = centerY + Math.sin(startHandAngle) * (radius - 30);

      ctx.beginPath();
      ctx.moveTo(centerX, centerY);
      ctx.lineTo(startHandX, startHandY);
      ctx.strokeStyle = '#22c55e';
      ctx.lineWidth = 3;
      ctx.stroke();

      // Draw end time hand
      const endHandAngle = endAngle;
      const endHandX = centerX + Math.cos(endHandAngle) * (radius - 30);
      const endHandY = centerY + Math.sin(endHandAngle) * (radius - 30);

      ctx.beginPath();
      ctx.moveTo(centerX, centerY);
      ctx.lineTo(endHandX, endHandY);
      ctx.strokeStyle = '#ef4444';
      ctx.lineWidth = 3;
      ctx.stroke();

      // Draw center dot
      ctx.beginPath();
      ctx.arc(centerX, centerY, 6, 0, 2 * Math.PI);
      ctx.fillStyle = '#64748b';
      ctx.fill();

      // Draw label
      ctx.fillStyle = '#cbd5e1';
      ctx.font = 'bold 12px sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(label, centerX, centerY + radius + 20);
    }

    function convertRange() {
      const fromTZ = document.getElementById("fromTZ").value;
      const toTZ = document.getElementById("toTZ").value;
      const start = document.getElementById("startTime").value;
      const end = document.getElementById("endTime").value;

      if (!fromTZ || !toTZ || !start || !end) {
        alert("Please fill all fields.");
        return;
      }

      try {
        const [startHour, startMin] = start.split(':').map(Number);
        const [endHour, endMin] = end.split(':').map(Number);

        const convertedStart = convertTime(start, fromTZ, toTZ);
        const convertedEnd = convertTime(end, fromTZ, toTZ);

        const fromOffset = getOffset(fromTZ);
        const toOffset = getOffset(toTZ);

        document.getElementById("sourceText").textContent =
          `${start} → ${end} (${fromTZ.replace(/_/g, ' ')})`;
        document.getElementById("convertedText").textContent =
          `${convertedStart.formatted} → ${convertedEnd.formatted} (${toTZ.replace(/_/g, ' ')})`;
        document.getElementById("offsetInfo").textContent =
          `Time offset: ${fromOffset} → ${toOffset}`;
        document.getElementById("result").classList.remove("hidden");

        // Draw clocks
        drawClock('sourceClock', startHour, startMin, endHour, endMin, fromTZ.split('/').pop().replace(/_/g, ' '));
        drawClock('targetClock', convertedStart.hours24, convertedStart.minutes, convertedEnd.hours24, convertedEnd.minutes, toTZ.split('/').pop().replace(/_/g, ' '));
      } catch (error) {
        alert("Error converting time zones. Please check your selections.");
        console.error(error);
      }
    }

    function swapTimezones() {
      const fromTZ = document.getElementById("fromTZ");
      const toTZ = document.getElementById("toTZ");
      const temp = fromTZ.value;
      fromTZ.value = toTZ.value;
      toTZ.value = temp;
    }

    function updateCurrentTime() {
      const now = new Date();
      const timeStr = now.toLocaleString('en-US', {
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit',
        hour12: true
      });
      const dateStr = now.toLocaleDateString('en-US', {
        weekday: 'short',
        year: 'numeric',
        month: 'short',
        day: 'numeric'
      });
      document.getElementById('currentTime').textContent = `${dateStr}, ${timeStr}`;
    }

    // Initialize
    populateTimezones();
    updateCurrentTime();
    setInterval(updateCurrentTime, 1000);
  </script>
</body>

</html>