<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <title>PostgreSQL Docs Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-950 text-slate-200">
<div class="flex h-screen">

  <!-- Sidebar -->
  <aside class="w-72 bg-slate-900 border-r border-slate-800 p-6">
    <h2 class="text-xl font-bold text-indigo-400 mb-6">
      PostgreSQL Docs
    </h2>

    <!-- Search -->
    <input
      id="search"
      type="text"
      placeholder="Search docs..."
      class="w-full mb-6 px-3 py-2 rounded bg-slate-800 text-slate-200
             border border-slate-700 focus:outline-none focus:ring focus:ring-indigo-500"/>

    <!-- Navigation -->
    <nav id="nav" class="space-y-2 text-sm">
      <a data-title="mvcc basics concurrency snapshot"
         data-url="mvcc.html"
         class="nav-item block px-3 py-2 rounded cursor-pointer hover:bg-slate-800">
        MVCC Basics
      </a>

      <a data-title="mvcc advanced hot ssi autovacuum bloat cloud"
         data-url="mvcc-2.html"
         class="nav-item block px-3 py-2 rounded cursor-pointer hover:bg-slate-800">
        MVCC Advanced
      </a>

      <a data-title="psql cli commands explain analyze"
         data-url="psql.html"
         class="nav-item block px-3 py-2 rounded cursor-pointer hover:bg-slate-800">
        psql Reference
      </a>
    </nav>
  </aside>

  <!-- Content Pane -->
  <main class="flex-1 bg-slate-950">
    <iframe
      id="contentFrame"
      src="mvcc.html"
      class="w-full h-full border-0 bg-slate-950">
    </iframe>
  </main>

</div>

<!-- ================= JS ================= -->
<script>
  const searchInput = document.getElementById("search");
  const navItems = document.querySelectorAll(".nav-item");
  const frame = document.getElementById("contentFrame");

  // Load doc into right pane
  navItems.forEach(item => {
    item.addEventListener("click", () => {
      navItems.forEach(i => i.classList.remove("bg-slate-800", "text-indigo-300"));
      item.classList.add("bg-slate-800", "text-indigo-300");
      frame.src = item.dataset.url;
    });
  });

  // Filter nav via search
  searchInput.addEventListener("input", e => {
    const q = e.target.value.toLowerCase();
    navItems.forEach(item => {
      const text = item.dataset.title;
      item.style.display = text.includes(q) ? "block" : "none";
    });
  });
</script>
</body>
</html>
