<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Web Code Editor - VS Code Experience</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<script src="https://cdn.tailwindcss.com"></script>
<script src="fileContents.js"></script>
<link rel="icon" type="image/x-icon" href="https://mohan-chinnappan-n5.github.io/dfv/img/mc_favIcon.ico" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/monaco-editor@0.47.0/min/vs/editor/editor.main.css"/>
<style>
  html, body { 
    height: 100%; 
    margin: 0; 
    overflow: hidden;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
  }
  .app-container { 
    display: flex; 
    flex-direction: column; 
    height: 100vh; 
  }
  .sidebar { 
    width: 48px; 
    background: #333842; 
    border-right: 1px solid #2d2d30;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 8px 0;
  }
  .sidebar-btn {
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    border-left: 2px solid transparent;
    color: #858585;
    transition: all 0.2s;
  }
  .sidebar-btn:hover {
    color: #fff;
  }
  .sidebar-btn.active {
    color: #fff;
    border-left-color: #007acc;
  }
  .explorer {
    width: 250px;
    background: #252526;
    border-right: 1px solid #2d2d30;
    display: none;
    flex-direction: column;
  }
  .explorer.visible {
    display: flex;
  }
  .explorer-header {
    padding: 12px 16px;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    color: #cccccc;
    background: #252526;
    border-bottom: 1px solid #2d2d30;
  }
  .file-tree {
    flex: 1;
    overflow-y: auto;
    padding: 8px 0;
  }
  .file-item {
    padding: 4px 16px;
    cursor: pointer;
    color: #cccccc;
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
  }
  .file-item:hover {
    background: #2a2d2e;
  }
  .file-item.active {
    background: #37373d;
  }
  .editor-container {
    flex: 1;
    display: flex;
    flex-direction: column;
  }
  .tabs-bar {
    background: #252526;
    border-bottom: 1px solid #2d2d30;
    display: flex;
    align-items: center;
    height: 35px;
    overflow-x: auto;
  }
  .tab {
    padding: 8px 16px;
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    border-right: 1px solid #2d2d30;
    color: #969696;
    font-size: 13px;
    white-space: nowrap;
  }
  .tab.active {
    background: #1e1e1e;
    color: #fff;
  }
  .tab:hover {
    background: #2a2d2e;
  }
  .tab-close {
    opacity: 0;
    font-size: 16px;
    line-height: 1;
  }
  .tab:hover .tab-close {
    opacity: 1;
  }
  .tab-close:hover {
    color: #fff;
  }
  #monacoEditor {
    flex: 1;
  }
  .status-bar {
    background: #007acc;
    color: #fff;
    height: 22px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 12px;
    font-size: 12px;
  }
  .status-item {
    display: flex;
    align-items: center;
    gap: 12px;
  }
  .status-item span {
    cursor: pointer;
    padding: 2px 6px;
    border-radius: 2px;
  }
  .status-item span:hover {
    background: rgba(255,255,255,0.1);
  }
  .modal {
    display: none;
    position: fixed;
    inset: 0;
    z-index: 1000;
    background: rgba(0,0,0,0.7);
    align-items: center;
    justify-content: center;
  }
  .modal.active {
    display: flex;
  }
  .modal-content {
    background: #252526;
    border: 1px solid #454545;
    border-radius: 6px;
    width: 90%;
    max-width: 600px;
    box-shadow: 0 20px 50px rgba(0,0,0,0.5);
  }
  .modal-header {
    padding: 16px 20px;
    border-bottom: 1px solid #454545;
    font-weight: 600;
    color: #cccccc;
  }
  .modal-body {
    padding: 20px;
  }
  .input-group {
    margin-bottom: 16px;
  }
  .input-group label {
    display: block;
    margin-bottom: 8px;
    color: #cccccc;
    font-size: 13px;
  }
  .input-group input, .input-group select {
    width: 100%;
    padding: 8px 12px;
    background: #3c3c3c;
    border: 1px solid #454545;
    color: #cccccc;
    border-radius: 3px;
    font-size: 13px;
  }
  .input-group input:focus, .input-group select:focus {
    outline: none;
    border-color: #007acc;
  }
  .modal-footer {
    padding: 16px 20px;
    border-top: 1px solid #454545;
    display: flex;
    justify-content: flex-end;
    gap: 8px;
  }
  .btn {
    padding: 6px 14px;
    border: none;
    border-radius: 3px;
    cursor: pointer;
    font-size: 13px;
    font-weight: 500;
  }
  .btn-primary {
    background: #0e639c;
    color: #fff;
  }
  .btn-primary:hover {
    background: #1177bb;
  }
  .btn-secondary {
    background: #3c3c3c;
    color: #cccccc;
  }
  .btn-secondary:hover {
    background: #505050;
  }
  .command-palette {
    position: absolute;
    top: 60px;
    left: 50%;
    transform: translateX(-50%);
    width: 90%;
    max-width: 600px;
    background: #252526;
    border: 1px solid #454545;
    border-radius: 6px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.5);
    z-index: 999;
    display: none;
  }
  .command-palette.active {
    display: block;
  }
  .command-input {
    width: 100%;
    padding: 12px 16px;
    background: transparent;
    border: none;
    color: #cccccc;
    font-size: 14px;
    border-bottom: 1px solid #454545;
  }
  .command-input:focus {
    outline: none;
  }
  .command-list {
    max-height: 400px;
    overflow-y: auto;
  }
  .command-item {
    padding: 8px 16px;
    cursor: pointer;
    color: #cccccc;
    font-size: 13px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .command-item:hover, .command-item.selected {
    background: #2a2d2e;
  }
  .command-key {
    color: #858585;
    font-size: 11px;
  }
  .settings-panel {
    padding: 20px;
    color: #cccccc;
  }
  .setting-item {
    margin-bottom: 20px;
    padding-bottom: 20px;
    border-bottom: 1px solid #2d2d30;
  }
  .setting-item:last-child {
    border-bottom: none;
  }
  .setting-title {
    font-weight: 600;
    margin-bottom: 8px;
  }
  .setting-description {
    font-size: 12px;
    color: #858585;
    margin-bottom: 12px;
  }
  .toggle {
    position: relative;
    display: inline-block;
    width: 40px;
    height: 20px;
  }
  .toggle input {
    opacity: 0;
    width: 0;
    height: 0;
  }
  .toggle-slider {
    position: absolute;
    cursor: pointer;
    inset: 0;
    background: #3c3c3c;
    border-radius: 20px;
    transition: 0.3s;
  }
  .toggle-slider:before {
    position: absolute;
    content: "";
    height: 14px;
    width: 14px;
    left: 3px;
    bottom: 3px;
    background: white;
    border-radius: 50%;
    transition: 0.3s;
  }
  .toggle input:checked + .toggle-slider {
    background: #007acc;
  }
  .toggle input:checked + .toggle-slider:before {
    transform: translateX(20px);
  }
  ::-webkit-scrollbar {
    width: 10px;
    height: 10px;
  }
  ::-webkit-scrollbar-track {
    background: #1e1e1e;
  }
  ::-webkit-scrollbar-thumb {
    background: #424242;
    border-radius: 5px;
  }
  ::-webkit-scrollbar-thumb:hover {
    background: #4e4e4e;
  }
  .notification {
    position: fixed;
    bottom: 40px;
    right: 20px;
    background: #252526;
    border: 1px solid #007acc;
    border-radius: 4px;
    padding: 12px 16px;
    color: #cccccc;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    z-index: 1001;
    animation: slideIn 0.3s ease;
  }
  @keyframes slideIn {
    from { transform: translateX(400px); }
    to { transform: translateX(0); }
  }
  .delete-btn {
    color: #858585;
    margin-left: 8px;
    opacity: 0;
    transition: opacity 0.2s;
  }
  .file-item:hover .delete-btn {
    opacity: 1;
  }
  .delete-btn:hover {
    color: #f48771;
  }
</style>
</head>
<body class="bg-zinc-900">

<div class="app-container">
  <!-- Top Menu Bar -->
  <div style="background: #3c3c3c; height: 30px; display: flex; align-items: center; padding: 0 12px; font-size: 13px; color: #cccccc; gap: 16px;">
    <div style="font-weight: 600;">Kovai - Web Code Editor</div>
    <span style="cursor: pointer; padding: 4px 8px;" onclick="openNewFile()">File</span>
    <span style="cursor: pointer; padding: 4px 8px;" onclick="openSettings()">Edit</span>
    <span style="cursor: pointer; padding: 4px 8px;" onclick="toggleCommandPalette()">View</span>
    <span style="cursor: pointer; padding: 4px 8px;" onclick="showHelp()">Help</span>
  </div>

  <div style="display: flex; flex: 1; overflow: hidden;">
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="sidebar-btn active" onclick="toggleExplorer()" title="Explorer (Ctrl+Shift+E)">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
          <path d="M3 3h8v8H3V3zm10 0h8v8h-8V3zM3 13h8v8H3v-8zm10 0h8v8h-8v-8z"/>
        </svg>
      </div>
      <div class="sidebar-btn" onclick="showSearch()" title="Search (Ctrl+Shift+F)">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
          <path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
        </svg>
      </div>
      <div class="sidebar-btn" onclick="openSettings()" title="Settings (Ctrl+,)">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
          <path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
        </svg>
      </div>
    </div>

    <!-- Explorer Panel -->
    <div class="explorer visible" id="explorer">
      <div class="explorer-header">
        EXPLORER
      </div>
      <div class="file-tree" id="fileTree">
        <div class="file-item active" onclick="openFile('welcome.md', 'markdown')">
          üìÑ welcome.md
          <span class="delete-btn" onclick="deleteFile(event, 'welcome.md')">√ó</span>
        </div>
        <div class="file-item" onclick="openFile('example.js', 'javascript')">
          üìÑ example.js
          <span class="delete-btn" onclick="deleteFile(event, 'example.js')">√ó</span>
        </div>
        <div class="file-item" onclick="openFile('styles.css', 'css')">
          üìÑ styles.css
          <span class="delete-btn" onclick="deleteFile(event, 'styles.css')">√ó</span>
        </div>
        <div class="file-item" onclick="openFile('index.html', 'html')">
          üìÑ index.html
          <span class="delete-btn" onclick="deleteFile(event, 'index.html')">√ó</span>
        </div>
        <div class="file-item" onclick="openFile('config.json', 'json')">
          üìÑ config.json
          <span class="delete-btn" onclick="deleteFile(event, 'config.json')">√ó</span>
        </div>
        <div class="file-item" onclick="openFile('script.py', 'python')">
          üìÑ script.py
          <span class="delete-btn" onclick="deleteFile(event, 'script.py')">√ó</span>
        </div>
        <div class="file-item" onclick="openFile('app.java', 'java')">
          üìÑ app.java
          <span class="delete-btn" onclick="deleteFile(event, 'app.java')">√ó</span>
        </div>
        <div class="file-item" onclick="openNewFileDialog()">
          ‚ûï New File...
        </div>
      </div>
    </div>

    <!-- Editor Area -->
    <div class="editor-container">
      <div class="tabs-bar" id="tabsBar">
        <div class="tab active" data-file="welcome.md">
          üìÑ welcome.md
          <span class="tab-close" onclick="closeTab(event, 'welcome.md')">√ó</span>
        </div>
      </div>
      <div id="monacoEditor"></div>
    </div>
  </div>

  <!-- Status Bar -->
  <div class="status-bar">
    <div class="status-item">
      <span id="statusLanguage">Markdown</span>
      <span id="statusEncoding">UTF-8</span>
      <span id="statusEol">LF</span>
      <span id="statusPosition">Ln 1, Col 1</span>
    </div>
    <div class="status-item">
      <span id="vimStatus" style="display: none; font-weight: 600;">-- NORMAL --</span>
      <span onclick="toggleVimMode()" style="background: rgba(255,255,255,0.1);" id="vimToggle">
        Vim: OFF
      </span>
      <span onclick="changeTheme()" style="background: rgba(255,255,255,0.1);">
        Theme
      </span>
    </div>
  </div>
</div>

<!-- Command Palette -->
<div class="command-palette" id="commandPalette">
  <input type="text" class="command-input" id="commandInput" placeholder="Type a command or search...">
  <div class="command-list" id="commandList">
    <div class="command-item" onclick="openNewFileDialog()">
      <span>üìÑ New File</span>
      <span class="command-key">Ctrl+N</span>
    </div>
    <div class="command-item" onclick="openSettings()">
      <span>‚öôÔ∏è Open Settings</span>
      <span class="command-key">Ctrl+,</span>
    </div>
    <div class="command-item" onclick="toggleVimMode()">
      <span>‚å®Ô∏è Toggle Vim Mode</span>
      <span class="command-key">Ctrl+Shift+V</span>
    </div>
    <div class="command-item" onclick="changeTheme()">
      <span>üé® Change Theme</span>
      <span class="command-key">Ctrl+K Ctrl+T</span>
    </div>
    <div class="command-item" onclick="formatDocument()">
      <span>‚ú® Format Document</span>
      <span class="command-key">Shift+Alt+F</span>
    </div>
    <div class="command-item" onclick="downloadFile()">
      <span>üíæ Download File</span>
      <span class="command-key">Ctrl+S</span>
    </div>
    <div class="command-item" onclick="toggleExplorer()">
      <span>üìÅ Toggle Explorer</span>
      <span class="command-key">Ctrl+Shift+E</span>
    </div>
  </div>
</div>

<!-- New File Modal -->
<div class="modal" id="newFileModal">
  <div class="modal-content">
    <div class="modal-header">New File</div>
    <div class="modal-body">
      <div class="input-group">
        <label>File Name</label>
        <input type="text" id="newFileName" placeholder="untitled.txt">
      </div>
      <div class="input-group">
        <label>Language</label>
        <select id="newFileLanguage">
          <option value="plaintext">Plain Text</option>
          <option value="javascript">JavaScript</option>
          <option value="typescript">TypeScript</option>
          <option value="html">HTML</option>
          <option value="css">CSS</option>
          <option value="python">Python</option>
          <option value="java">Java</option>
          <option value="cpp">C++</option>
          <option value="csharp">C#</option>
          <option value="go">Go</option>
          <option value="rust">Rust</option>
          <option value="php">PHP</option>
          <option value="ruby">Ruby</option>
          <option value="sql">SQL</option>
          <option value="json">JSON</option>
          <option value="xml">XML</option>
          <option value="yaml">YAML</option>
          <option value="markdown">Markdown</option>
        </select>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-secondary" onclick="closeModal('newFileModal')">Cancel</button>
      <button class="btn btn-primary" onclick="createNewFile()">Create</button>
    </div>
  </div>
</div>

<!-- Settings Modal -->
<div class="modal" id="settingsModal">
  <div class="modal-content" style="max-width: 800px; max-height: 80vh; overflow-y: auto;">
    <div class="modal-header">Settings</div>
    <div class="modal-body settings-panel">
      <div class="setting-item">
        <div class="setting-title">Vim Mode</div>
        <div class="setting-description">Enable Vim keybindings for modal editing</div>
        <label class="toggle">
          <input type="checkbox" id="vimModeToggle" onchange="toggleVimMode()">
          <span class="toggle-slider"></span>
        </label>
      </div>
      
      <div class="setting-item">
        <div class="setting-title">Font Size</div>
        <div class="setting-description">Controls the font size in the editor</div>
        <input type="range" min="10" max="24" value="14" id="fontSizeSlider" 
               onchange="changeFontSize(this.value)"
               style="width: 100%; accent-color: #007acc;">
        <span id="fontSizeValue">14px</span>
      </div>
      
      <div class="setting-item">
        <div class="setting-title">Word Wrap</div>
        <div class="setting-description">Controls how lines should wrap</div>
        <label class="toggle">
          <input type="checkbox" id="wordWrapToggle" checked onchange="toggleWordWrap()">
          <span class="toggle-slider"></span>
        </label>
      </div>
      
      <div class="setting-item">
        <div class="setting-title">Minimap</div>
        <div class="setting-description">Show a minimap of the file</div>
        <label class="toggle">
          <input type="checkbox" id="minimapToggle" checked onchange="toggleMinimap()">
          <span class="toggle-slider"></span>
        </label>
      </div>
      
      <div class="setting-item">
        <div class="setting-title">Line Numbers</div>
        <div class="setting-description">Show line numbers in the editor</div>
        <label class="toggle">
          <input type="checkbox" id="lineNumbersToggle" checked onchange="toggleLineNumbers()">
          <span class="toggle-slider"></span>
        </label>
      </div>
      
      <div class="setting-item">
        <div class="setting-title">Auto Save</div>
        <div class="setting-description">Automatically save files after a delay</div>
        <label class="toggle">
          <input type="checkbox" id="autoSaveToggle" onchange="toggleAutoSave()">
          <span class="toggle-slider"></span>
        </label>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-primary" onclick="closeModal('settingsModal')">Close</button>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.47.0/min/vs/loader.js"></script>
<script src="editor.js"></script>

</body>
</html>